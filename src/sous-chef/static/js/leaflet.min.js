function printMapAndItinerary(){var e=$("body"),t=$("#main"),n=t.parent(),o=$("<div>"),i=$(".leaflet-routing-alt table");o.addClass("print-container").css("position","relative").height(t.height()).append(t).append(i).prependTo(e);var r=e.children().not("script").not(o).detach();window.print(),e.prepend(r),n.prepend(t),o.remove()}function getWaypoints(e){var t=[];control.setWaypoints(t),$.get("../getDailyOrders/?route="+e,function(e){var n=L.Routing.Waypoint.extend({member:"",address:""});for(var o in e.waypoints)t.push(new n(L.latLng(e.waypoints[o].latitude,e.waypoints[o].longitude))),t[o].options.address=e.waypoints[o].address,t[o].options.member=e.waypoints[o].member,t[o].options.id=e.waypoints[o].id,t[o].name=e.waypoints[o].member;var i=new n(L.latLng(45.516564,-73.575145));i.name="santropol",t.splice(0,0,i),control.setWaypoints(t)})}function main_map_init(e,t){var n="https://{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png",o=new L.TileLayer(n,{maxZoom:18});e.addLayer(o),e.setView(new L.LatLng(45.516564,(-73.575145)),13);var i=L.Routing.mapbox("pk.eyJ1IjoicmphY3F1ZW1pbiIsImEiOiJjaXAxaWpxdGkwMm5ydGhtNG84eGdjbGthIn0.TdwCw6vhAJdgxzH0JBp6iA");i.options.profile="mapbox.cycling";var r=L.Routing.Control.extend({initialize:function(e,t){L.Routing.Control.prototype.initialize.call(this,{router:i,geocoder:L.Control.Geocoder.nominatim({geocodingQueryParams:{countrycodes:"ca"}}),routeWhileDragging:!0,reverseWaypoints:!0,language:"fr",showAlternatives:!0,lineOptions:{styles:[{color:"black",opacity:.3,weight:11},{color:"white",opacity:.9,weight:9},{color:"red",opacity:1,weight:3}]},altLineOptions:{styles:[{color:"black",opacity:.1,weight:11},{color:"white",opacity:.25,weight:9},{color:"blue",opacity:.25,weight:3}]},createMarker:function(e,t){var n;if("santropol"==t.name){n=L.marker([45.516564,-73.575145],{draggable:!1,opacity:1,icon:L.AwesomeMarkers.icon({icon:"cutlery",prefix:"fa",markerColor:"red",iconColor:"#f28f82"})});var o="<div class='ui list'><div class='item'><i class='user icon'></i> Santro </div></div>";return n.bindPopup(o).openPopup(),n}n=L.marker(t.latLng,{icon:L.icon.glyph({prefix:"",glyph:String.fromCharCode(65+e)}),draggable:!0});var o="<div class='ui list'><div class='item'><i class='user icon'></i>"+t.options.member+"</div><div class='item'><i class='home icon'></i>"+t.options.address+"</div></div>";return n.bindPopup(o).openPopup(),n},createGeocoder:L.bind(function(e){var t=L.Routing.GeocoderElement.prototype.options.createGeocoder.call(this,e,this.getPlan().getWaypoints().length,this.getPlan().options),n=L.DomUtil.create("div","geocoder-handle");L.DomUtil.create("span","geocoder-geolocate-btn",t.container);return n.innerHTML=String.fromCharCode(65+e),t.container.insertBefore(n,t.container.firstChild),L.DomEvent.on(n,"click",function(){this.getWaypoints()[e]},this),t},this)})}});control=new r;var s=control.onAdd(e);$(".controls").append(s),$("#btnprint").click(function(){printMapAndItinerary()}),$("#btnsave").click(function(){var e=control.getWaypoints(),t={members:[]};$.each(e,function(e,n){console.log(n),console.log(n.options),"undefined"!=typeof n.options.id&&t.members.push({id:n.options.id})}),$.ajax("../saveRoute/",{data:JSON.stringify(t),contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",success:function(e){alert("Route Saved")}})}),$(".ui.dropdown").dropdown({onChange:function(e){getWaypoints(e)}}),Sortable.create(document.querySelector(".leaflet-routing-geocoders"),{handle:".geocoder-handle",draggable:".leaflet-routing-geocoder",onUpdate:function(e){var t=e.oldIndex,n=e.newIndex,o=control.getWaypoints(),i=o[t];t!==n&&void 0!==n&&(o.splice(t,1),o.splice(n,0,i),control.setWaypoints(o))}}),getWaypoints(1)}function distance(e,t,n,o,i){var r=Math.PI*e/180,s=Math.PI*n/180,a=t-o,l=Math.PI*a/180,d=Math.sin(r)*Math.sin(s)+Math.cos(r)*Math.cos(s)*Math.cos(l);return d=Math.acos(d),d=180*d/Math.PI,d=60*d*1.1515,"K"==i&&(d=1.609344*d),"N"==i&&(d=.8684*d),d}!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.L||(t.L={})).Routing=e()}}(function(){return function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){function o(e,t,n){function o(e){return e>=200&&e<300||304===e}function i(){void 0===a.status||o(a.status)?t.call(a,null,a):t.call(a,a,null)}var r=!1;if("undefined"==typeof window.XMLHttpRequest)return t(Error("Browser not supported"));if("undefined"==typeof n){var s=e.match(/^\s*https?:\/\/[^\/]*/);n=s&&s[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var a=new window.XMLHttpRequest;if(n&&!("withCredentials"in a)){a=new window.XDomainRequest;var l=t;t=function(){if(r)l.apply(this,arguments);else{var e=this,t=arguments;setTimeout(function(){l.apply(e,t)},0)}}}return"onload"in a?a.onload=i:a.onreadystatechange=function(){4===a.readyState&&i()},a.onerror=function(e){t.call(this,e||!0,null),t=function(){}},a.onprogress=function(){},a.ontimeout=function(e){t.call(this,e,null),t=function(){}},a.onabort=function(e){t.call(this,e,null),t=function(){}},a.open("GET",e,!0),a.send(null),r=!0,a}"undefined"!=typeof t&&(t.exports=o)},{}],2:[function(e,t,n){function o(e,t){e=Math.round(e*t),e<<=1,e<0&&(e=~e);for(var n="";e>=32;)n+=String.fromCharCode((32|31&e)+63),e>>=5;return n+=String.fromCharCode(e+63)}var i={};i.decode=function(e,t){for(var n,o,i=0,r=0,s=0,a=[],l=0,d=0,u=null,c=Math.pow(10,t||5);i<e.length;){u=null,l=0,d=0;do u=e.charCodeAt(i++)-63,d|=(31&u)<<l,l+=5;while(u>=32);n=1&d?~(d>>1):d>>1,l=d=0;do u=e.charCodeAt(i++)-63,d|=(31&u)<<l,l+=5;while(u>=32);o=1&d?~(d>>1):d>>1,r+=n,s+=o,a.push([r/c,s/c])}return a},i.encode=function(e,t){if(!e.length)return"";for(var n=Math.pow(10,t||5),i=o(e[0][0],n)+o(e[0][1],n),r=1;r<e.length;r++){var s=e[r],a=e[r-1];i+=o(s[0]-a[0],n),i+=o(s[1]-a[1],n)}return i},void 0!==typeof t&&(t.exports=i)},{}],3:[function(e,t,n){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.Autocomplete=L.Class.extend({options:{timeout:500,blurTimeout:100,noResultsMessage:"No results found."},initialize:function(e,t,n,o){L.setOptions(this,o),this._elem=e,this._resultFn=o.resultFn?L.Util.bind(o.resultFn,o.resultContext):null,this._autocomplete=o.autocompleteFn?L.Util.bind(o.autocompleteFn,o.autocompleteContext):null,this._selectFn=L.Util.bind(t,n),this._container=L.DomUtil.create("div","leaflet-routing-geocoder-result"),this._resultTable=L.DomUtil.create("table","",this._container),L.DomEvent.addListener(this._elem,"input",this._keyPressed,this),L.DomEvent.addListener(this._elem,"keypress",this._keyPressed,this),L.DomEvent.addListener(this._elem,"keydown",this._keyDown,this),L.DomEvent.addListener(this._elem,"blur",function(){this._isOpen&&this.close()},this)},close:function(){L.DomUtil.removeClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!1},_open:function(){var e=this._elem.getBoundingClientRect();this._container.parentElement||(this._container.style.left=e.left+window.scrollX+"px",this._container.style.top=e.bottom+window.scrollY+"px",this._container.style.width=e.right-e.left+"px",document.body.appendChild(this._container)),L.DomUtil.addClass(this._container,"leaflet-routing-geocoder-result-open"),this._isOpen=!0},_setResults:function(e){var t,n,o,i;for(delete this._selection,this._results=e;this._resultTable.firstChild;)this._resultTable.removeChild(this._resultTable.firstChild);for(t=0;t<e.length;t++)n=L.DomUtil.create("tr","",this._resultTable),n.setAttribute("data-result-index",t),o=L.DomUtil.create("td","",n),i=document.createTextNode(e[t].name),o.appendChild(i),L.DomEvent.addListener(o,"mousedown",L.DomEvent.preventDefault),L.DomEvent.addListener(o,"click",this._createClickListener(e[t]));t||(n=L.DomUtil.create("tr","",this._resultTable),o=L.DomUtil.create("td","leaflet-routing-geocoder-no-results",n),o.innerHTML=this.options.noResultsMessage),this._open(),e.length>0&&this._select(1)},_createClickListener:function(e){var t=this._resultSelected(e);return L.bind(function(){this._elem.blur(),t()},this)},_resultSelected:function(e){return L.bind(function(){this.close(),this._elem.value=e.name,this._lastCompletedText=e.name,this._selectFn(e)},this)},_keyPressed:function(e){var t;return this._isOpen&&13===e.keyCode&&this._selection?(t=parseInt(this._selection.getAttribute("data-result-index"),10),this._resultSelected(this._results[t])(),void L.DomEvent.preventDefault(e)):13===e.keyCode?void this._complete(this._resultFn,!0):this._autocomplete&&document.activeElement===this._elem?(this._timer&&clearTimeout(this._timer),void(this._timer=setTimeout(L.Util.bind(function(){this._complete(this._autocomplete)},this),this.options.timeout))):void this._unselect()},_select:function(e){var t=this._selection;t&&(L.DomUtil.removeClass(t.firstChild,"leaflet-routing-geocoder-selected"),t=t[e>0?"nextSibling":"previousSibling"]),t||(t=this._resultTable[e>0?"firstChild":"lastChild"]),t&&(L.DomUtil.addClass(t.firstChild,"leaflet-routing-geocoder-selected"),this._selection=t)},_unselect:function(){this._selection&&L.DomUtil.removeClass(this._selection.firstChild,"leaflet-routing-geocoder-selected"),delete this._selection},_keyDown:function(e){if(this._isOpen)switch(e.keyCode){case 27:return this.close(),void L.DomEvent.preventDefault(e);case 38:return this._select(-1),void L.DomEvent.preventDefault(e);case 40:return this._select(1),void L.DomEvent.preventDefault(e)}},_complete:function(e,t){function n(e){this._lastCompletedText=o,t&&1===e.length?this._resultSelected(e[0])():this._setResults(e)}var o=this._elem.value;o&&(o!==this._lastCompletedText?e(o,n,this):t&&n.call(this,this._results))}})}()},{}],4:[function(e,t,n){(function(n){!function(){"use strict";var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null;o.Routing=o.Routing||{},o.extend(o.Routing,e("./L.Routing.Itinerary")),o.extend(o.Routing,e("./L.Routing.Line")),o.extend(o.Routing,e("./L.Routing.Plan")),o.extend(o.Routing,e("./L.Routing.OSRMv1")),o.extend(o.Routing,e("./L.Routing.ErrorControl")),o.Routing.Control=o.Routing.Itinerary.extend({options:{fitSelectedRoutes:"smart",routeLine:function(e,t){return o.Routing.line(e,t)},autoRoute:!0,routeWhileDragging:!1,routeDragInterval:500,waypointMode:"connect",useZoomParameter:!1,showAlternatives:!1},initialize:function(e){o.Util.setOptions(this,e),this._router=this.options.router||new o.Routing.OSRMv1(e),this._plan=this.options.plan||o.Routing.plan(this.options.waypoints,e),this._requestCount=0,o.Routing.Itinerary.prototype.initialize.call(this,e),this.on("routeselected",this._routeSelected,this),this._plan.on("waypointschanged",this._onWaypointsChanged,this),e.routeWhileDragging&&this._setupRouteDragging(),this.options.autoRoute&&this.route()},onAdd:function(e){var t=o.Routing.Itinerary.prototype.onAdd.call(this,e);return this._map=e,this._map.addLayer(this._plan),this.options.useZoomParameter&&this._map.on("zoomend",function(){this.route({callback:o.bind(this._updateLineCallback,this)})},this),this._plan.options.geocoder&&t.insertBefore(this._plan.createGeocoders(),t.firstChild),t},onRemove:function(e){return this._line&&e.removeLayer(this._line),e.removeLayer(this._plan),o.Routing.Itinerary.prototype.onRemove.call(this,e)},getWaypoints:function(){return this._plan.getWaypoints()},setWaypoints:function(e){return this._plan.setWaypoints(e),this},spliceWaypoints:function(){var e=this._plan.spliceWaypoints.apply(this._plan,arguments);return e},getPlan:function(){return this._plan},getRouter:function(){return this._router},_routeSelected:function(e){var t=e.route,n=this.options.showAlternatives&&e.alternatives,o=this.options.fitSelectedRoutes,i="smart"===o&&!this._waypointsVisible()||"smart"!==o&&o;this._updateLines({route:t,alternatives:n}),i&&this._map.fitBounds(this._line.getBounds()),"snap"===this.options.waypointMode&&(this._plan.off("waypointschanged",this._onWaypointsChanged,this),this.setWaypoints(t.waypoints),this._plan.on("waypointschanged",this._onWaypointsChanged,this))},_waypointsVisible:function(){var e,t,n,i,r,s=this.getWaypoints();try{for(e=this._map.getSize(),i=0;i<s.length;i++)r=this._map.latLngToLayerPoint(s[i].latLng),t?t.extend(r):t=o.bounds([r]);return n=t.getSize(),(n.x>e.x/5||n.y>e.y/5)&&this._waypointsInViewport()}catch(a){return!1}},_waypointsInViewport:function(){var e,t,n=this.getWaypoints();try{e=this._map.getBounds()}catch(o){return!1}for(t=0;t<n.length;t++)if(e.contains(n[t].latLng))return!0;return!1},_updateLines:function(e){var t=void 0===this.options.addWaypoints||this.options.addWaypoints;this._clearLines(),this._alternatives=[],e.alternatives&&e.alternatives.forEach(function(e,t){this._alternatives[t]=this.options.routeLine(e,o.extend({isAlternative:!0},this.options.altLineOptions||this.options.lineOptions)),this._alternatives[t].addTo(this._map),this._hookAltEvents(this._alternatives[t])},this),this._line=this.options.routeLine(e.route,o.extend({addWaypoints:t,extendToWaypoints:"connect"===this.options.waypointMode},this.options.lineOptions)),this._line.addTo(this._map),this._hookEvents(this._line)},_hookEvents:function(e){e.on("linetouched",function(e){this._plan.dragNewWaypoint(e)},this)},_hookAltEvents:function(e){e.on("linetouched",function(e){var t=this._routes.slice(),n=t.splice(e.target._route.routesIndex,1)[0];this.fire("routeselected",{route:n,alternatives:t})},this)},_onWaypointsChanged:function(e){this.options.autoRoute&&this.route({}),this._plan.isReady()||(this._clearLines(),this._clearAlts()),this.fire("waypointschanged",{waypoints:e.waypoints})},_setupRouteDragging:function(){var e,t=0;this._plan.on("waypointdrag",o.bind(function(n){e=n.waypoints,t||(t=setTimeout(o.bind(function(){this.route({waypoints:e,geometryOnly:!0,callback:o.bind(this._updateLineCallback,this)}),t=void 0},this),this.options.routeDragInterval))},this)),this._plan.on("waypointdragend",function(){t&&(clearTimeout(t),t=void 0),this.route()},this)},_updateLineCallback:function(e,t){e?this._clearLines():this._updateLines({route:t[0],alternatives:t.slice(1)})},route:function(e){var t,n=++this._requestCount;e=e||{},this._plan.isReady()&&(this.options.useZoomParameter&&(e.z=this._map&&this._map.getZoom()),t=e&&e.waypoints||this._plan.getWaypoints(),this.fire("routingstart",{waypoints:t}),this._router.route(t,e.callback||function(o,i){if(n===this._requestCount){if(this._clearLines(),this._clearAlts(),o)return void this.fire("routingerror",{error:o});if(i.forEach(function(e,t){e.routesIndex=t}),e.geometryOnly){var r=i.splice(0,1)[0];this._routeSelected({route:r,alternatives:i})}else this.fire("routesfound",{waypoints:t,routes:i}),this.setAlternatives(i)}},this,e))},_clearLines:function(){if(this._line&&(this._map.removeLayer(this._line),delete this._line),this._alternatives&&this._alternatives.length){for(var e in this._alternatives)this._map.removeLayer(this._alternatives[e]);this._alternatives=[]}}}),o.Routing.control=function(e){return new o.Routing.Control(e)},t.exports=o.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.ErrorControl":5,"./L.Routing.Itinerary":8,"./L.Routing.Line":10,"./L.Routing.OSRMv1":12,"./L.Routing.Plan":13}],5:[function(e,t,n){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.ErrorControl=L.Control.extend({options:{header:"Routing error",formatMessage:function(e){return e.status<0?"Calculating the route caused an error. Technical description follows: <code><pre>"+e.message+"</pre></code":"The route could not be calculated. "+e.message}},initialize:function(e,t){L.Control.prototype.initialize.call(this,t),e.on("routingerror",L.bind(function(e){this._element&&(this._element.children[1].innerHTML=this.options.formatMessage(e.error),this._element.style.visibility="visible")},this)).on("routingstart",L.bind(function(){this._element&&(this._element.style.visibility="hidden")},this))},onAdd:function(){var e,t;return this._element=L.DomUtil.create("div","leaflet-bar leaflet-routing-error"),this._element.style.visibility="hidden",e=L.DomUtil.create("h3",null,this._element),t=L.DomUtil.create("span",null,this._element),e.innerHTML=this.options.header,this._element},onRemove:function(){delete this._element}}),L.Routing.errorControl=function(e,t){return new L.Routing.ErrorControl(e,t)}}()},{}],6:[function(e,t,n){(function(n){!function(){"use strict";var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null;o.Routing=o.Routing||{},o.extend(o.Routing,e("./L.Routing.Localization")),o.Routing.Formatter=o.Class.extend({options:{units:"metric",unitNames:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"mín",seconds:"s"},language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(e){o.setOptions(this,e)},formatDistance:function(e,t){var n,i,r,s,a=this.options.unitNames,l=t<=0,d=l?function(e){return e}:o.bind(this._round,this);return"imperial"===this.options.units?(i=e/.9144,r=i>=1e3?{value:d(e/1609.344,t),unit:a.miles}:{value:d(i,t),unit:a.yards}):(n=d(e,t),r={value:n>=1e3?n/1e3:n,unit:n>=1e3?a.kilometers:a.meters}),l&&(s=Math.pow(10,-t),r.value=Math.round(r.value*s)/s),o.Util.template(this.options.distanceTemplate,r)},_round:function(e,t){var n=t||this.options.roundingSensitivity,o=Math.pow(10,(Math.floor(e/n)+"").length-1),i=Math.floor(e/o),r=i>5?o:o/2;return Math.round(e/r)*r},formatTime:function(e){return e>86400?Math.round(e/3600)+" h":e>3600?Math.floor(e/3600)+" h "+Math.round(e%3600/60)+" min":e>300?Math.round(e/60)+" min":e>60?Math.floor(e/60)+" min"+(e%60!==0?" "+e%60+" s":""):e+" s"},formatInstruction:function(e,t){return void 0===e.text?o.Util.template(this._getInstructionTemplate(e,t),o.extend({exitStr:e.exit?o.Routing.Localization[this.options.language].formatOrder(e.exit):"",dir:o.Routing.Localization[this.options.language].directions[e.direction]},e)):e.text},getIconName:function(e,t){switch(e.type){case"Straight":return 0===t?"depart":"continue";case"SlightRight":return"bear-right";case"Right":return"turn-right";case"SharpRight":return"sharp-right";case"TurnAround":return"u-turn";case"SharpLeft":return"sharp-left";case"Left":return"turn-left";case"SlightLeft":return"bear-left";case"WaypointReached":return"via";case"Roundabout":return"enter-roundabout";case"DestinationReached":return"arrive"}},_getInstructionTemplate:function(e,t){var n="Straight"===e.type?0===t?"Head":"Continue":e.type,i=o.Routing.Localization[this.options.language].instructions[n];return i[0]+(i.length>1&&e.road?i[1]:"")}}),t.exports=o.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Localization":11}],7:[function(e,t,n){(function(n){!function(){"use strict";function o(e){e.setSelectionRange?e.setSelectionRange(0,9999):e.select()}var i="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null;i.Routing=i.Routing||{},i.extend(i.Routing,e("./L.Routing.Autocomplete")),i.Routing.GeocoderElement=i.Class.extend({includes:i.Mixin.Events,options:{createGeocoder:function(e,t,n){var o=i.DomUtil.create("div","leaflet-routing-geocoder"),r=i.DomUtil.create("input","",o),s=n.addWaypoints?i.DomUtil.create("span","leaflet-routing-remove-waypoint",o):void 0;return r.disabled=!n.addWaypoints,{container:o,input:r,closeButton:s}},geocoderPlaceholder:function(e,t,n){var o=i.Routing.Localization[n.options.language].ui;return 0===e?o.startPlaceholder:e<t-1?i.Util.template(o.viaPlaceholder,{viaNumber:e}):o.endPlaceholder},geocoderClass:function(){return""},waypointNameFallback:function(e){var t=e.lat<0?"S":"N",n=e.lng<0?"W":"E",o=(Math.round(1e4*Math.abs(e.lat))/1e4).toString(),i=(Math.round(1e4*Math.abs(e.lng))/1e4).toString();return t+o+", "+n+i},maxGeocoderTolerance:200,autocompleteOptions:{},language:"en"},initialize:function(e,t,n,r){i.setOptions(this,r);var s=this.options.createGeocoder(t,n,this.options),a=s.closeButton,l=s.input;l.setAttribute("placeholder",this.options.geocoderPlaceholder(t,n,this)),l.className=this.options.geocoderClass(t,n),this._element=s,this._waypoint=e,this.update(),l.value=e.name,i.DomEvent.addListener(l,"click",function(){o(this)},l),a&&i.DomEvent.addListener(a,"click",function(){this.fire("delete",{waypoint:this._waypoint})},this),new i.Routing.Autocomplete(l,function(t){l.value=t.name,e.name=t.name,e.latLng=t.center,this.fire("geocoded",{waypoint:e,value:t})},this,i.extend({resultFn:this.options.geocoder.geocode,resultContext:this.options.geocoder,autocompleteFn:this.options.geocoder.suggest,autocompleteContext:this.options.geocoder},this.options.autocompleteOptions))},getContainer:function(){return this._element.container},setValue:function(e){this._element.input.value=e},update:function(e){var t,n=this._waypoint;n.name=n.name||"",!n.latLng||!e&&n.name||(t=this.options.waypointNameFallback(n.latLng),this.options.geocoder&&this.options.geocoder.reverse?this.options.geocoder.reverse(n.latLng,67108864,function(e){e.length>0&&e[0].center.distanceTo(n.latLng)<this.options.maxGeocoderTolerance?n.name=e[0].name:n.name=t,this._update()},this):(n.name=t,this._update()))},focus:function(){var e=this._element.input;e.focus(),o(e)},_update:function(){var e=this._waypoint,t=e&&e.name?e.name:"";this.setValue(t),this.fire("reversegeocoded",{waypoint:e,value:t})}}),i.Routing.geocoderElement=function(e,t,n,o){return new i.Routing.GeocoderElement(e,t,n,o)},t.exports=i.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Autocomplete":3}],8:[function(e,t,n){(function(n){!function(){"use strict";var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null;o.Routing=o.Routing||{},o.extend(o.Routing,e("./L.Routing.Formatter")),o.extend(o.Routing,e("./L.Routing.ItineraryBuilder")),o.Routing.Itinerary=o.Control.extend({includes:o.Mixin.Events,options:{pointMarkerStyle:{radius:5,color:"#03f",fillColor:"white",opacity:1,fillOpacity:.7},summaryTemplate:"<h2>{name}</h2><h3>{distance}, {time}</h3>",timeTemplate:"{time}",containerClassName:"",alternativeClassName:"",minimizedClassName:"",itineraryClassName:"",totalDistanceRoundingSensitivity:-1,show:!0,collapsible:void 0,collapseBtn:function(e){var t=o.DomUtil.create("span",e.options.collapseBtnClass);o.DomEvent.on(t,"click",e._toggle,e),e._container.insertBefore(t,e._container.firstChild)},collapseBtnClass:"leaflet-routing-collapse-btn"},initialize:function(e){o.setOptions(this,e),this._formatter=this.options.formatter||new o.Routing.Formatter(this.options),this._itineraryBuilder=this.options.itineraryBuilder||new o.Routing.ItineraryBuilder({containerClassName:this.options.itineraryClassName})},onAdd:function(e){var t=this.options.collapsible;return t=t||void 0===t&&e.getSize().x<=640,this._container=o.DomUtil.create("div","leaflet-routing-container leaflet-bar "+(this.options.show?"":"leaflet-routing-container-hide ")+(t?"leaflet-routing-collapsible ":"")+this.options.containerClassName),this._altContainer=this.createAlternativesContainer(),this._container.appendChild(this._altContainer),o.DomEvent.disableClickPropagation(this._container),o.DomEvent.addListener(this._container,"mousewheel",function(e){o.DomEvent.stopPropagation(e)}),t&&this.options.collapseBtn(this),this._container},onRemove:function(){},createAlternativesContainer:function(){return o.DomUtil.create("div","leaflet-routing-alternatives-container")},setAlternatives:function(e){var t,n,o;for(this._clearAlts(),this._routes=e,t=0;t<this._routes.length;t++)n=this._routes[t],o=this._createAlternative(n,t),this._altContainer.appendChild(o),this._altElements.push(o);return this._selectRoute({route:this._routes[0],alternatives:this._routes.slice(1)}),this},show:function(){o.DomUtil.removeClass(this._container,"leaflet-routing-container-hide")},hide:function(){o.DomUtil.addClass(this._container,"leaflet-routing-container-hide")},_toggle:function(){var e=o.DomUtil.hasClass(this._container,"leaflet-routing-container-hide");this[e?"show":"hide"]()},_createAlternative:function(e,t){var n=o.DomUtil.create("div","leaflet-routing-alt "+this.options.alternativeClassName+(t>0?" leaflet-routing-alt-minimized "+this.options.minimizedClassName:"")),i=this.options.summaryTemplate,r=o.extend({name:e.name,distance:this._formatter.formatDistance(e.summary.totalDistance,this.options.totalDistanceRoundingSensitivity),time:this._formatter.formatTime(e.summary.totalTime)},e);return n.innerHTML="function"==typeof i?i(r):o.Util.template(i,r),o.DomEvent.addListener(n,"click",this._onAltClicked,this),this.on("routeselected",this._selectAlt,this),n.appendChild(this._createItineraryContainer(e)),n},_clearAlts:function(){for(var e=this._altContainer;e&&e.firstChild;)e.removeChild(e.firstChild);this._altElements=[]},_createItineraryContainer:function(e){var t,n,o,i,r,s,a=this._itineraryBuilder.createContainer(),l=this._itineraryBuilder.createStepsContainer();for(a.appendChild(l),t=0;t<e.instructions.length;t++)n=e.instructions[t],r=this._formatter.formatInstruction(n,t),i=this._formatter.formatDistance(n.distance),s=this._formatter.getIconName(n,t),o=this._itineraryBuilder.createStep(r,i,s,l),this._addRowListeners(o,e.coordinates[n.index]);return a},_addRowListeners:function(e,t){o.DomEvent.addListener(e,"mouseover",function(){this._marker=o.circleMarker(t,this.options.pointMarkerStyle).addTo(this._map)},this),o.DomEvent.addListener(e,"mouseout",function(){this._marker&&(this._map.removeLayer(this._marker),delete this._marker)},this),o.DomEvent.addListener(e,"click",function(e){this._map.panTo(t),o.DomEvent.stopPropagation(e)},this)},_onAltClicked:function(e){for(var t=e.target||window.event.srcElement;!o.DomUtil.hasClass(t,"leaflet-routing-alt");)t=t.parentElement;var n=this._altElements.indexOf(t),i=this._routes.slice(),r=i.splice(n,1)[0];this.fire("routeselected",{route:r,alternatives:i})},_selectAlt:function(e){var t,n,i,r;if(t=this._altElements[e.route.routesIndex],o.DomUtil.hasClass(t,"leaflet-routing-alt-minimized"))for(n=0;n<this._altElements.length;n++)i=this._altElements[n],r=n===e.route.routesIndex?"removeClass":"addClass",o.DomUtil[r](i,"leaflet-routing-alt-minimized"),this.options.minimizedClassName&&o.DomUtil[r](i,this.options.minimizedClassName),n!==e.route.routesIndex&&(i.scrollTop=0);o.DomEvent.stop(e)},_selectRoute:function(e){this._marker&&(this._map.removeLayer(this._marker),delete this._marker),this.fire("routeselected",e)}}),o.Routing.itinerary=function(e){return new o.Routing.Itinerary(e)},t.exports=o.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Formatter":6,"./L.Routing.ItineraryBuilder":9}],9:[function(e,t,n){(function(e){!function(){"use strict";var n="undefined"!=typeof window?window.L:"undefined"!=typeof e?e.L:null;n.Routing=n.Routing||{},n.Routing.ItineraryBuilder=n.Class.extend({options:{containerClassName:""},initialize:function(e){n.setOptions(this,e)},createContainer:function(e){var t=n.DomUtil.create("table",e||""),o=n.DomUtil.create("colgroup","",t);return n.DomUtil.create("col","leaflet-routing-instruction-icon",o),n.DomUtil.create("col","leaflet-routing-instruction-text",o),n.DomUtil.create("col","leaflet-routing-instruction-distance",o),t},createStepsContainer:function(){return n.DomUtil.create("tbody","")},createStep:function(e,t,o,i){var r,s,a=n.DomUtil.create("tr","",i);return s=n.DomUtil.create("td","",a),r=n.DomUtil.create("span","leaflet-routing-icon leaflet-routing-icon-"+o,s),s.appendChild(r),s=n.DomUtil.create("td","",a),s.appendChild(document.createTextNode(e)),s=n.DomUtil.create("td","",a),s.appendChild(document.createTextNode(t)),a}}),t.exports=n.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,n){(function(e){!function(){"use strict";var n="undefined"!=typeof window?window.L:"undefined"!=typeof e?e.L:null;n.Routing=n.Routing||{},n.Routing.Line=n.LayerGroup.extend({includes:n.Mixin.Events,options:{styles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2}],missingRouteStyles:[{color:"black",opacity:.15,weight:7},{color:"white",opacity:.6,weight:4},{color:"gray",opacity:.8,weight:2,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(e,t){n.setOptions(this,t),n.LayerGroup.prototype.initialize.call(this,t),this._route=e,this.options.extendToWaypoints&&this._extendToWaypoints(),this._addSegment(e.coordinates,this.options.styles,this.options.addWaypoints)},addTo:function(e){return e.addLayer(this),this},getBounds:function(){return n.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var e,t=this._route.inputWaypoints,n=[];for(e=0;e<t.length;e++)n.push(this._findClosestRoutePoint(t[e].latLng));return n},_findClosestRoutePoint:function(e){var t,n,o,i=Number.MAX_VALUE;for(n=this._route.coordinates.length-1;n>=0;n--)o=e.distanceTo(this._route.coordinates[n]),o<i&&(t=n,i=o);return t},_extendToWaypoints:function(){var e,t,o,i=this._route.inputWaypoints,r=this._getWaypointIndices();for(e=0;e<i.length;e++)t=i[e].latLng,o=n.latLng(this._route.coordinates[r[e]]),t.distanceTo(o)>this.options.missingRouteTolerance&&this._addSegment([t,o],this.options.missingRouteStyles)},_addSegment:function(e,t,o){var i,r;for(i=0;i<t.length;i++)r=n.polyline(e,t[i]),this.addLayer(r),o&&r.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(e){for(var t=this._getWaypointIndices(),n=t.length-1;n>=0&&t[n]>e;)n--;return n},_onLineTouched:function(e){var t=this._findNearestWpBefore(this._findClosestRoutePoint(e.latlng));this.fire("linetouched",{afterIndex:t,latlng:e.latlng})},_getWaypointIndices:function(){return this._wpIndices||(this._wpIndices=this._route.waypointIndices||this._findWaypointIndices()),this._wpIndices}}),n.Routing.line=function(e,t){return new n.Routing.Line(e,t)},t.exports=n.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(e,t,n){!function(){"use strict";L.Routing=L.Routing||{},L.Routing.Localization={en:{directions:{N:"north",NE:"northeast",E:"east",SE:"southeast",S:"south",SW:"southwest",W:"west",NW:"northwest"},instructions:{Head:["Head {dir}"," on {road}"],Continue:["Continue {dir}"," on {road}"],SlightRight:["Slight right"," onto {road}"],Right:["Right"," onto {road}"],SharpRight:["Sharp right"," onto {road}"],TurnAround:["Turn around"],SharpLeft:["Sharp left"," onto {road}"],Left:["Left"," onto {road}"],SlightLeft:["Slight left"," onto {road}"],WaypointReached:["Waypoint reached"],Roundabout:["Take the {exitStr} exit in the roundabout"," onto {road}"],DestinationReached:["Destination reached"]},formatOrder:function(e){var t=e%10-1,n=["st","nd","rd"];return n[t]?e+n[t]:e+"th"},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"End"}},de:{directions:{N:"Norden",NE:"Nordosten",E:"Osten",SE:"Südosten",S:"Süden",SW:"Südwesten",W:"Westen",NW:"Nordwesten"},instructions:{Head:["Richtung {dir}"," auf {road}"],Continue:["Geradeaus Richtung {dir}"," auf {road}"],SlightRight:["Leicht rechts abbiegen"," auf {road}"],Right:["Rechts abbiegen"," auf {road}"],SharpRight:["Scharf rechts abbiegen"," auf {road}"],TurnAround:["Wenden"],SharpLeft:["Scharf links abbiegen"," auf {road}"],Left:["Links abbiegen"," auf {road}"],
SlightLeft:["Leicht links abbiegen"," auf {road}"],WaypointReached:["Zwischenhalt erreicht"],Roundabout:["Nehmen Sie die {exitStr} Ausfahrt im Kreisverkehr"," auf {road}"],DestinationReached:["Sie haben ihr Ziel erreicht"]},formatOrder:function(e){return e+"."},ui:{startPlaceholder:"Start",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Ziel"}},sv:{directions:{N:"norr",NE:"nordost",E:"öst",SE:"sydost",S:"syd",SW:"sydväst",W:"väst",NW:"nordväst"},instructions:{Head:["Åk åt {dir}"," på {road}"],Continue:["Fortsätt {dir}"," på {road}"],SlightRight:["Svagt höger"," på {road}"],Right:["Sväng höger"," på {road}"],SharpRight:["Skarpt höger"," på {road}"],TurnAround:["Vänd"],SharpLeft:["Skarpt vänster"," på {road}"],Left:["Sväng vänster"," på {road}"],SlightLeft:["Svagt vänster"," på {road}"],WaypointReached:["Viapunkt nådd"],Roundabout:["Tag {exitStr} avfarten i rondellen"," till {road}"],DestinationReached:["Framme vid resans mål"]},formatOrder:function(e){return["första","andra","tredje","fjärde","femte","sjätte","sjunde","åttonde","nionde","tionde"][e-1]},ui:{startPlaceholder:"Från",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Till"}},sp:{directions:{N:"norte",NE:"noreste",E:"este",SE:"sureste",S:"sur",SW:"suroeste",W:"oeste",NW:"noroeste"},instructions:{Head:["Derecho {dir}"," sobre {road}"],Continue:["Continuar {dir}"," en {road}"],SlightRight:["Leve giro a la derecha"," sobre {road}"],Right:["Derecha"," sobre {road}"],SharpRight:["Giro pronunciado a la derecha"," sobre {road}"],TurnAround:["Dar vuelta"],SharpLeft:["Giro pronunciado a la izquierda"," sobre {road}"],Left:["Izquierda"," en {road}"],SlightLeft:["Leve giro a la izquierda"," en {road}"],WaypointReached:["Llegó a un punto del camino"],Roundabout:["Tomar {exitStr} salida en la rotonda"," en {road}"],DestinationReached:["Llegada a destino"]},formatOrder:function(e){return e+"º"},ui:{startPlaceholder:"Inicio",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Destino"}},nl:{directions:{N:"noordelijke",NE:"noordoostelijke",E:"oostelijke",SE:"zuidoostelijke",S:"zuidelijke",SW:"zuidewestelijke",W:"westelijke",NW:"noordwestelijke"},instructions:{Head:["Vertrek in {dir} richting"," de {road} op"],Continue:["Ga in {dir} richting"," de {road} op"],SlightRight:["Volg de weg naar rechts"," de {road} op"],Right:["Ga rechtsaf"," de {road} op"],SharpRight:["Ga scherpe bocht naar rechts"," de {road} op"],TurnAround:["Keer om"],SharpLeft:["Ga scherpe bocht naar links"," de {road} op"],Left:["Ga linksaf"," de {road} op"],SlightLeft:["Volg de weg naar links"," de {road} op"],WaypointReached:["Aangekomen bij tussenpunt"],Roundabout:["Neem de {exitStr} afslag op de rotonde"," de {road} op"],DestinationReached:["Aangekomen op eindpunt"]},formatOrder:function(e){return 1===e||e>=20?e+"ste":e+"de"},ui:{startPlaceholder:"Vertrekpunt",viaPlaceholder:"Via {viaNumber}",endPlaceholder:"Bestemming"}},fr:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ouest",W:"ouest",NW:"nord-ouest"},instructions:{Head:["Tout droit au {dir}"," sur {road}"],Continue:["Continuer au {dir}"," sur {road}"],SlightRight:["Légèrement à droite"," sur {road}"],Right:["A droite"," sur {road}"],SharpRight:["Complètement à droite"," sur {road}"],TurnAround:["Faire demi-tour"],SharpLeft:["Complètement à gauche"," sur {road}"],Left:["A gauche"," sur {road}"],SlightLeft:["Légèrement à gauche"," sur {road}"],WaypointReached:["Point d'étape atteint"],Roundabout:["Au rond-point, prenez la {exitStr} sortie"," sur {road}"],DestinationReached:["Destination atteinte"]},formatOrder:function(e){return e+"º"},ui:{startPlaceholder:"Départ",viaPlaceholder:"Intermédiaire {viaNumber}",endPlaceholder:"Arrivée"}},it:{directions:{N:"nord",NE:"nord-est",E:"est",SE:"sud-est",S:"sud",SW:"sud-ovest",W:"ovest",NW:"nord-ovest"},instructions:{Head:["Dritto verso {dir}"," su {road}"],Continue:["Continuare verso {dir}"," su {road}"],SlightRight:["Mantenere la destra"," su {road}"],Right:["A destra"," su {road}"],SharpRight:["Strettamente a destra"," su {road}"],TurnAround:["Fare inversione di marcia"],SharpLeft:["Strettamente a sinistra"," su {road}"],Left:["A sinistra"," sur {road}"],SlightLeft:["Mantenere la sinistra"," su {road}"],WaypointReached:["Punto di passaggio raggiunto"],Roundabout:["Alla rotonda, prendere la {exitStr} uscita"],DestinationReached:["Destinazione raggiunta"]},formatOrder:function(e){return e+"º"},ui:{startPlaceholder:"Partenza",viaPlaceholder:"Intermedia {viaNumber}",endPlaceholder:"Destinazione"}},pt:{directions:{N:"norte",NE:"nordeste",E:"leste",SE:"sudeste",S:"sul",SW:"sudoeste",W:"oeste",NW:"noroeste"},instructions:{Head:["Siga {dir}"," na {road}"],Continue:["Continue {dir}"," na {road}"],SlightRight:["Curva ligeira a direita"," na {road}"],Right:["Curva a direita"," na {road}"],SharpRight:["Curva fechada a direita"," na {road}"],TurnAround:["Retorne"],SharpLeft:["Curva fechada a esquerda"," na {road}"],Left:["Curva a esquerda"," na {road}"],SlightLeft:["Curva ligueira a esquerda"," na {road}"],WaypointReached:["Ponto de interesse atingido"],Roundabout:["Pegue a {exitStr} saída na rotatória"," na {road}"],DestinationReached:["Destino atingido"]},formatOrder:function(e){return e+"º"},ui:{startPlaceholder:"Origem",viaPlaceholder:"Intermédio {viaNumber}",endPlaceholder:"Destino"}},sk:{directions:{N:"sever",NE:"serverovýchod",E:"východ",SE:"juhovýchod",S:"juh",SW:"juhozápad",W:"západ",NW:"serverozápad"},instructions:{Head:["Mierte na {dir}"," na {road}"],Continue:["Pokračujte na {dir}"," na {road}"],SlightRight:["Mierne doprava"," na {road}"],Right:["Doprava"," na {road}"],SharpRight:["Prudko doprava"," na {road}"],TurnAround:["Otočte sa"],SharpLeft:["Prudko doľava"," na {road}"],Left:["Doľava"," na {road}"],SlightLeft:["Mierne doľava"," na {road}"],WaypointReached:["Ste v prejazdovom bode."],Roundabout:["Odbočte na {exitStr} výjazde"," na {road}"],DestinationReached:["Prišli ste do cieľa."]},formatOrder:function(e){var t=e%10-1,n=[".",".","."];return n[t]?e+n[t]:e+"."},ui:{startPlaceholder:"Začiatok",viaPlaceholder:"Cez {viaNumber}",endPlaceholder:"Koniec"}},el:{directions:{N:"βόρεια",NE:"βορειοανατολικά",E:"ανατολικά",SE:"νοτιοανατολικά",S:"νότια",SW:"νοτιοδυτικά",W:"δυτικά",NW:"βορειοδυτικά"},instructions:{Head:["Κατευθυνθείτε {dir}"," στην {road}"],Continue:["Συνεχίστε {dir}"," στην {road}"],SlightRight:["Ελαφρώς δεξιά"," στην {road}"],Right:["Δεξιά"," στην {road}"],SharpRight:["Απότομη δεξιά στροφή"," στην {road}"],TurnAround:["Κάντε αναστροφή"],SharpLeft:["Απότομη αριστερή στροφή"," στην {road}"],Left:["Αριστερά"," στην {road}"],SlightLeft:["Ελαφρώς αριστερά"," στην {road}"],WaypointReached:["Φτάσατε στο σημείο αναφοράς"],Roundabout:["Ακολουθήστε την {exitStr} έξοδο στο κυκλικό κόμβο"," στην {road}"],DestinationReached:["Φτάσατε στον προορισμό σας"]},formatOrder:function(e){return e+"º"},ui:{startPlaceholder:"Αφετηρία",viaPlaceholder:"μέσω {viaNumber}",endPlaceholder:"Προορισμός"}}},t.exports=L.Routing}()},{}],12:[function(e,t,n){(function(n){!function(){"use strict";var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("corslite"),r=e("polyline");o.Routing=o.Routing||{},o.extend(o.Routing,e("./L.Routing.Waypoint")),o.Routing.OSRMv1=o.Class.extend({options:{serviceUrl:"http://router.project-osrm.org/route/v1",profile:"driving",timeout:3e4,routingOptions:{alternatives:!0,steps:!0},polylinePrecision:5},initialize:function(e){o.Util.setOptions(this,e),this._hints={locations:{}}},route:function(e,t,n,r){var s,a,l,d,u=!1,c=[];for(s=this.buildRouteUrl(e,o.extend({},this.options.routingOptions,r)),a=setTimeout(function(){u=!0,t.call(n||t,{status:-1,message:"OSRM request timed out."})},this.options.timeout),d=0;d<e.length;d++)l=e[d],c.push(new o.Routing.Waypoint(l.latLng,l.name,l.options));return i(s,o.bind(function(e,o){var i,s,l;if(clearTimeout(a),!u){if(s="HTTP request failed: "+e,l=-1,!e)try{i=JSON.parse(o.responseText);try{return this._routeDone(i,c,r,t,n)}catch(d){l=-3,s=d.toString()}}catch(d){l=-2,s="Error parsing OSRM response: "+d.toString()}t.call(n||t,{status:l,message:s})}},this)),this},_routeDone:function(e,t,n,o,i){var r,s,a,l=[];if(i=i||o,"Ok"!==e.code)return void o.call(i,{status:e.code});for(r=this._toWaypoints(t,e.waypoints),s=0;s<e.routes.length;s++)a=this._convertRoute(e.routes[s],n.geometryOnly),a.inputWaypoints=t,a.waypoints=r,l.push(a);this._saveHintData(e.waypoints,t),o.call(i,null,l)},_convertRoute:function(e,t){var n,o,i,r,s,a,l={name:"",summary:{totalDistance:e.distance,totalTime:e.duration}},d=[],u=[],c=0,h=e.legs.length;if(t)return l.coordinates=this._decodePolyline(e.geometry),l;for(n=0;n<h;n++)for(i=e.legs[n],o=0;o<i.steps.length;o++)r=i.steps[o],s=this._decodePolyline(r.geometry),d.push(s),a=this._maneuverToInstructionType(r.maneuver,n===h-1),a&&u.push({type:a,distance:r.distance,time:r.duration,road:r.name,direction:this._bearingToDirection(r.maneuver.bearing_after),exit:r.maneuver.exit,index:c}),c+=s.length;return l.coordinates=Array.prototype.concat.apply([],d),l.instructions=u,l},_bearingToDirection:function(e){var t=Math.round(e/45)%8;return["N","NE","E","SE","S","SW","W","NW"][t]},_maneuverToInstructionType:function(e,t){switch(e.type){case"turn":case"end of road":switch(e.modifier){case"straight":return"Straight";case"slight right":return"SlightRight";case"right":return"Right";case"sharp right":return"SharpRight";case"sharp left":return"SharpLeft";case"left":return"Left";case"slight left":return"SlightLeft";case"uturn":return"TurnAround";default:return null}break;case"new name":case"merge":case"ramp":case"fork":return"Continue";case"arrive":return t?"DestinationReached":"WaypointReached";case"roundabout":case"rotary":return"Roundabout";default:return null}},_decodePolyline:function(e){var t,n=r.decode(e,this.options.polylinePrecision),i=new Array(n.length);for(t=n.length-1;t>=0;t--)i[t]=o.latLng(n[t]);return i},_toWaypoints:function(e,t){var n,i=[];for(n=0;n<t.length;n++)i.push(o.Routing.waypoint(o.latLng(t[n]),e[n].name,e[n].options));return i},_createName:function(e){var t,n="";for(t=0;t<e.length;t++)e[t]&&(n&&(n+=", "),n+=e[t].charAt(0).toUpperCase()+e[t].slice(1));return n},buildRouteUrl:function(e,t){for(var n,o,i,r,s=[],a=[],l=0;l<e.length;l++)n=e[l],o=n.latLng,s.push(o.lng+","+o.lat),a.push(this._hints[this._locationKey(o)]||"");return r=i=!(t&&t.geometryOnly),this.options.serviceUrl+"/"+this.options.profile+"/"+s.join(";")+"?"+(t.z?"z="+t.z+"&":t.geometryOnly?"overview=full&":"")+"alternatives="+r.toString()+"&steps="+i.toString()+(t.allowUTurns?"&continue_straight="+!t.allowUTurns:"")},_locationKey:function(e){return e.lat+","+e.lng},_saveHintData:function(e,t){var n;this._hints={locations:{}};for(var o=e.length-1;o>=0;o--)n=t[o].latLng,this._hints.locations[this._locationKey(n)]=e[o].hint},_convertSummary:function(e){return{totalDistance:e.total_distance,totalTime:e.total_time}},_convertInstructions:function(e){var t,n,o,i,r=[];for(t=0;t<e.length;t++)n=e[t],o=this._drivingDirectionType(n[0]),i=n[0].split("-"),o&&r.push({type:o,distance:n[2],time:n[4],road:n[1],direction:n[6],exit:i.length>1?i[1]:void 0,index:n[3]});return r}}),o.Routing.osrmv1=function(e){return new o.Routing.OSRM(e)},t.exports=o.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.Waypoint":14,corslite:1,polyline:2}],13:[function(e,t,n){(function(n){!function(){"use strict";var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null;o.Routing=o.Routing||{},o.extend(o.Routing,e("./L.Routing.GeocoderElement")),o.extend(o.Routing,e("./L.Routing.Waypoint")),o.Routing.Plan=o.Class.extend({includes:o.Mixin.Events,options:{dragStyles:[{color:"black",opacity:.15,weight:9},{color:"white",opacity:.8,weight:6},{color:"red",opacity:1,weight:2,dashArray:"7,12"}],draggableWaypoints:!0,routeWhileDragging:!1,addWaypoints:!0,reverseWaypoints:!1,addButtonClassName:"",language:"en",createGeocoderElement:o.Routing.geocoderElement,createMarker:function(e,t){var n={draggable:this.draggableWaypoints},i=o.marker(t.latLng,n);return i},geocodersClassName:""},initialize:function(e,t){o.Util.setOptions(this,t),this._waypoints=[],this.setWaypoints(e)},isReady:function(){var e;for(e=0;e<this._waypoints.length;e++)if(!this._waypoints[e].latLng)return!1;return!0},getWaypoints:function(){var e,t=[];for(e=0;e<this._waypoints.length;e++)t.push(this._waypoints[e]);return t},setWaypoints:function(e){var t=[0,this._waypoints.length].concat(e);return this.spliceWaypoints.apply(this,t),this},spliceWaypoints:function(){var e,t=[arguments[0],arguments[1]];for(e=2;e<arguments.length;e++)t.push(arguments[e]&&arguments[e].hasOwnProperty("latLng")?arguments[e]:o.Routing.waypoint(arguments[e]));for([].splice.apply(this._waypoints,t);this._waypoints.length<2;)this.spliceWaypoints(this._waypoints.length,0,null);this._updateMarkers(),this._fireChanged.apply(this,t)},onAdd:function(e){this._map=e,this._updateMarkers()},onRemove:function(){var e;if(this._removeMarkers(),this._newWp)for(e=0;e<this._newWp.lines.length;e++)this._map.removeLayer(this._newWp.lines[e]);delete this._map},createGeocoders:function(){var e,t,n=o.DomUtil.create("div","leaflet-routing-geocoders "+this.options.geocodersClassName),i=this._waypoints;return this._geocoderContainer=n,this._geocoderElems=[],this.options.addWaypoints&&(e=o.DomUtil.create("button","leaflet-routing-add-waypoint "+this.options.addButtonClassName,n),e.setAttribute("type","button"),o.DomEvent.addListener(e,"click",function(){this.spliceWaypoints(i.length,0,null)},this)),this.options.reverseWaypoints&&(t=o.DomUtil.create("button","leaflet-routing-reverse-waypoints",n),t.setAttribute("type","button"),o.DomEvent.addListener(t,"click",function(){this._waypoints.reverse(),this.setWaypoints(this._waypoints)},this)),this._updateGeocoders(),this.on("waypointsspliced",this._updateGeocoders),n},_createGeocoder:function(e){var t=this.options.createGeocoderElement(this._waypoints[e],e,this._waypoints.length,this.options);return t.on("delete",function(){e>0||this._waypoints.length>2?this.spliceWaypoints(e,1):this.spliceWaypoints(e,1,new o.Routing.Waypoint)},this).on("geocoded",function(t){this._updateMarkers(),this._fireChanged(),this._focusGeocoder(e+1),this.fire("waypointgeocoded",{waypointIndex:e,waypoint:t.waypoint})},this).on("reversegeocoded",function(t){this.fire("waypointgeocoded",{waypointIndex:e,waypoint:t.waypoint})},this),t},_updateGeocoders:function(){var e,t,n=[];for(e=0;e<this._geocoderElems.length;e++)this._geocoderContainer.removeChild(this._geocoderElems[e].getContainer());for(e=this._waypoints.length-1;e>=0;e--)t=this._createGeocoder(e),this._geocoderContainer.insertBefore(t.getContainer(),this._geocoderContainer.firstChild),n.push(t);this._geocoderElems=n.reverse()},_removeMarkers:function(){var e;if(this._markers)for(e=0;e<this._markers.length;e++)this._markers[e]&&this._map.removeLayer(this._markers[e]);this._markers=[]},_updateMarkers:function(){var e,t;if(this._map)for(this._removeMarkers(),e=0;e<this._waypoints.length;e++)this._waypoints[e].latLng?(t=this.options.createMarker(e,this._waypoints[e],this._waypoints.length),t&&(t.addTo(this._map),this.options.draggableWaypoints&&this._hookWaypointEvents(t,e))):t=null,this._markers.push(t)},_fireChanged:function(){this.fire("waypointschanged",{waypoints:this.getWaypoints()}),arguments.length>=2&&this.fire("waypointsspliced",{index:Array.prototype.shift.call(arguments),nRemoved:Array.prototype.shift.call(arguments),added:arguments})},_hookWaypointEvents:function(e,t,n){var i,r,s=function(e){return n?e.latlng:e.target.getLatLng()},a=o.bind(function(e){this.fire("waypointdragstart",{index:t,latlng:s(e)})},this),l=o.bind(function(e){this._waypoints[t].latLng=s(e),this.fire("waypointdrag",{index:t,latlng:s(e)})},this),d=o.bind(function(e){this._waypoints[t].latLng=s(e),this._waypoints[t].name="",this._geocoderElems&&this._geocoderElems[t].update(!0),this.fire("waypointdragend",{index:t,latlng:s(e)}),this._fireChanged()},this);n?(i=o.bind(function(e){this._markers[t].setLatLng(e.latlng),l(e)},this),r=o.bind(function(e){this._map.dragging.enable(),this._map.off("mouseup",r),this._map.off("mousemove",i),d(e)},this),this._map.dragging.disable(),this._map.on("mousemove",i),this._map.on("mouseup",r),a({latlng:this._waypoints[t].latLng})):(e.on("dragstart",a),e.on("drag",l),e.on("dragend",d))},dragNewWaypoint:function(e){var t=e.afterIndex+1;this.options.routeWhileDragging?(this.spliceWaypoints(t,0,e.latlng),this._hookWaypointEvents(this._markers[t],t,!0)):this._dragNewWaypoint(t,e.latlng)},_dragNewWaypoint:function(e,t){var n,i=new o.Routing.Waypoint(t),r=this._waypoints[e-1],s=this._waypoints[e],a=this.options.createMarker(e,i,this._waypoints.length+1),l=[],d=o.bind(function(e){var t;for(a&&a.setLatLng(e.latlng),t=0;t<l.length;t++)l[t].spliceLatLngs(1,1,e.latlng)},this),u=o.bind(function(t){var n;for(a&&this._map.removeLayer(a),n=0;n<l.length;n++)this._map.removeLayer(l[n]);this._map.off("mousemove",d),this._map.off("mouseup",u),this.spliceWaypoints(e,0,t.latlng)},this);for(a&&a.addTo(this._map),n=0;n<this.options.dragStyles.length;n++)l.push(o.polyline([r.latLng,t,s.latLng],this.options.dragStyles[n]).addTo(this._map));this._map.on("mousemove",d),this._map.on("mouseup",u)},_focusGeocoder:function(e){this._geocoderElems[e]?this._geocoderElems[e].focus():document.activeElement.blur()}}),o.Routing.plan=function(e,t){return new o.Routing.Plan(e,t)},t.exports=o.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./L.Routing.GeocoderElement":7,"./L.Routing.Waypoint":14}],14:[function(e,t,n){(function(e){!function(){"use strict";var n="undefined"!=typeof window?window.L:"undefined"!=typeof e?e.L:null;n.Routing=n.Routing||{},n.Routing.Waypoint=n.Class.extend({options:{allowUTurn:!1},initialize:function(e,t,o){n.Util.setOptions(this,o),this.latLng=n.latLng(e),this.name=t}}),n.Routing.waypoint=function(e,t,o){return new n.Routing.Waypoint(e,t,o)},t.exports=n.Routing}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[4])(4)}),function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){function o(e,t,n){function o(e){return e>=200&&e<300||304===e}function i(){void 0===a.status||o(a.status)?t.call(a,null,a):t.call(a,a,null)}var r=!1;if("undefined"==typeof window.XMLHttpRequest)return t(Error("Browser not supported"));if("undefined"==typeof n){var s=e.match(/^\s*https?:\/\/[^\/]*/);n=s&&s[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var a=new window.XMLHttpRequest;if(n&&!("withCredentials"in a)){a=new window.XDomainRequest;var l=t;t=function(){if(r)l.apply(this,arguments);else{var e=this,t=arguments;setTimeout(function(){l.apply(e,t)},0)}}}return"onload"in a?a.onload=i:a.onreadystatechange=function(){4===a.readyState&&i()},a.onerror=function(e){t.call(this,e||!0,null),t=function(){}},a.onprogress=function(){},a.ontimeout=function(e){t.call(this,e,null),t=function(){}},a.onabort=function(e){t.call(this,e,null),t=function(){}},a.open("GET",e,!0),a.send(null),r=!0,a}"undefined"!=typeof t&&(t.exports=o)},{}],2:[function(e,t,n){function o(e,t){e=Math.round(e*t),e<<=1,e<0&&(e=~e);for(var n="";e>=32;)n+=String.fromCharCode((32|31&e)+63),e>>=5;return n+=String.fromCharCode(e+63)}var i={};i.decode=function(e,t){for(var n,o,i=0,r=0,s=0,a=[],l=0,d=0,u=null,c=Math.pow(10,t||5);i<e.length;){u=null,l=0,d=0;do u=e.charCodeAt(i++)-63,d|=(31&u)<<l,l+=5;while(u>=32);n=1&d?~(d>>1):d>>1,l=d=0;do u=e.charCodeAt(i++)-63,d|=(31&u)<<l,l+=5;while(u>=32);o=1&d?~(d>>1):d>>1,r+=n,s+=o,a.push([r/c,s/c])}return a},i.encode=function(e,t){if(!e.length)return"";for(var n=Math.pow(10,t||5),i=o(e[0][0],n)+o(e[0][1],n),r=1;r<e.length;r++){var s=e[r],a=e[r-1];i+=o(s[0]-a[0],n),i+=o(s[1]-a[1],n)}return i},void 0!==typeof t&&(t.exports=i)},{}],3:[function(e,t,n){(function(n){!function(){"use strict";var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("corslite"),r=e("polyline");o.Routing=o.Routing||{},o.Routing.Mapbox=o.Class.extend({options:{serviceUrl:"https://api.tiles.mapbox.com/v4/directions/",timeout:3e4,profile:"mapbox.driving"},initialize:function(e,t){o.Util.setOptions(this,t),this._accessToken=e},route:function(e,t,n,r){var s,a,l,d,u=!1,c=[];for(r=r||{},s=this.buildRouteUrl(e,r),a=setTimeout(function(){u=!0,t.call(n||t,{status:-1,message:"OSRM request timed out."})},this.options.timeout),d=0;d<e.length;d++)l=e[d],c.push({latLng:l.latLng,name:l.name,options:l.options});return i(s,o.bind(function(e,o){var i;clearTimeout(a),u||(i=o&&o.responseText?JSON.parse(o.responseText):{},e||i.hasOwnProperty("error")?t.call(n||t,{status:-1,message:"HTTP request failed: "+(e||i.error)}):this._routeDone(i,c,t,n))},this),!0),this},_routeDone:function(e,t,n,o){var i,s,a,l,d,u=[];for(o=o||n,a=this._toWaypoints(t,[e.origin].concat(e.waypoints).concat([e.destination])),d=0;d<e.routes.length;d++)i=e.routes[d],s=r.decode(i.geometry,6),l=this._mapWaypointIndices(a,i.steps,s),u.push({name:i.summary,coordinates:s,instructions:this._convertInstructions(i.steps,l.stepIndices),summary:this._convertSummary(i),inputWaypoints:t,waypoints:a,waypointIndices:l.waypointIndices});n.call(o,void 0,u)},_toWaypoints:function(e,t){var n,i,r=[];for(n=0;n<t.length;n++)i=t[n].geometry.coordinates,r.push({latLng:o.latLng(i[1],i[0]),name:t[n].properties.name,options:e[n].options});return r},buildRouteUrl:function(e,t){for(var n,o,i,r=[],s=0;s<e.length;s++)i=this._locationKey(e[s].latLng),r.push((s?";":"")+i);return o=n=!(t&&t.geometryOnly),this.options.serviceUrl+this.options.profile+"/"+r+".json?instructions="+n+"&alternatives="+o+"&geometry=polyline&access_token="+this._accessToken},_locationKey:function(e){return e.lng+","+e.lat},_convertSummary:function(e){return{totalDistance:e.distance,totalTime:e.duration}},_convertInstructions:function(e,t){var n,o,i,r=[];for(n=0;n<e.length;n++)o=e[n],i=this._drivingDirectionType(o.maneuver),i&&r.push({type:i,distance:o.distance||0,time:o.duration||0,road:o.way_name,direction:o.direction,index:t[n]});return r},_drivingDirectionType:function(e){switch(e.type){case"continue":return"Straight";case"bear right":return"SlightRight";case"turn right":return"Right";case"sharp right":return"SharpRight";case"u-turn":return"TurnAround";case"sharp left":return"SharpLeft";case"turn left":return"Left";case"bear left":return"SlightLeft";case"waypoint":return"WaypointReached";case"depart":return"Straight";case"enter roundabout":return"Roundabout";case"arrive":return"DestinationReached";default:return null}},_mapWaypointIndices:function(e,t,n){var o,i,r=[],s=[],a=0,l=0,d=e[a],u=t[l].maneuver.location.coordinates;for(o=0;o<n.length;o++)i=n[o],Math.abs(i[0]-d.latLng.lat)<1e-5&&Math.abs(i[1]-d.latLng.lng)<1e-5&&(r.push(o),d=e[++a]),u&&Math.abs(i[0]-u[1])<1e-5&&Math.abs(i[1]-u[0])<1e-5&&(s.push(o),l++,u=t[l]&&t[l].maneuver.location.coordinates);return r.length<e.length&&a===e.length-1&&r.push(n.length-1),r.length!==e.length&&console.warn("Could not find all waypoints in route's coordinates. :("),{waypointIndices:r,stepIndices:s}}}),o.Routing.mapbox=function(e,t){return new o.Routing.Mapbox(e,t)},t.exports=o.Routing.Mapbox}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{corslite:1,polyline:2}]},{},[3]),function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return i(n?n:t)},u,u.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){(function(n){var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("./geocoders/nominatim")["class"];t.exports={"class":o.Control.extend({options:{showResultIcons:!1,collapsed:!0,expand:"click",position:"topright",placeholder:"Search...",errorMessage:"Nothing found."},_callbackId:0,initialize:function(e){o.Util.setOptions(this,e),this.options.geocoder||(this.options.geocoder=new i)},onAdd:function(e){var t,n="leaflet-control-geocoder",i=o.DomUtil.create("div",n+" leaflet-bar"),r=o.DomUtil.create("a","leaflet-control-geocoder-icon",i),s=this._form=o.DomUtil.create("form",n+"-form",i);return r.innerHTML="&nbsp;",r.href="javascript:void(0);",this._map=e,this._container=i,t=this._input=o.DomUtil.create("input"),t.type="text",t.placeholder=this.options.placeholder,o.DomEvent.addListener(t,"keydown",this._keydown,this),this._errorElement=document.createElement("div"),this._errorElement.className=n+"-form-no-error",this._errorElement.innerHTML=this.options.errorMessage,this._alts=o.DomUtil.create("ul",n+"-alternatives leaflet-control-geocoder-alternatives-minimized"),s.appendChild(t),this._container.appendChild(this._errorElement),i.appendChild(this._alts),o.DomEvent.addListener(s,"submit",this._geocode,this),this.options.collapsed?"click"===this.options.expand?o.DomEvent.addListener(r,"click",function(e){0===e.button&&2!==e.detail&&this._toggle()},this):(o.DomEvent.addListener(r,"mouseover",this._expand,this),o.DomEvent.addListener(r,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(o.DomEvent.addListener(r,"click",function(e){this._geocode(e)},this),this._expand()),o.DomEvent.disableClickPropagation(i),i},_geocodeResult:function(e){if(o.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber"),1===e.length)this._geocodeResultSelected(e[0]);else if(e.length>0){this._alts.innerHTML="",this._results=e,o.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized");for(var t=0;t<e.length;t++)this._alts.appendChild(this._createAlt(e[t],t))}else o.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")},markGeocode:function(e){return this._map.fitBounds(e.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new o.Marker(e.center).bindPopup(e.html||e.name).addTo(this._map).openPopup(),this},_geocode:function(e){return o.DomEvent.preventDefault(e),o.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber"),this._clearResults(),this.options.geocoder.geocode(this._input.value,this._geocodeResult,this),!1},_geocodeResultSelected:function(e){this.options.collapsed?this._collapse():this._clearResults(),this.markGeocode(e)},_toggle:function(){this._container.className.indexOf("leaflet-control-geocoder-expanded")>=0?this._collapse():this._expand()},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded"),this._input.select()},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-geocoder-expanded",""),o.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),o.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error")},_clearResults:function(){o.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),this._selection=null,o.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error")},_createAlt:function(e,t){var n=o.DomUtil.create("li",""),i=o.DomUtil.create("a","",n),r=this.options.showResultIcons&&e.icon?o.DomUtil.create("img","",i):null,s=e.html?void 0:document.createTextNode(e.name),a=function(t){o.DomEvent.preventDefault(t),this._geocodeResultSelected(e)};return r&&(r.src=e.icon),n.setAttribute("data-result-index",t),e.html?i.innerHTML=i.innerHTML+e.html:i.appendChild(s),o.DomEvent.addListener(n,"click",a,this),n},_keydown:function(e){var t=this,n=function(e){t._selection&&(o.DomUtil.removeClass(t._selection,"leaflet-control-geocoder-selected"),t._selection=t._selection[e>0?"nextSibling":"previousSibling"]),t._selection||(t._selection=t._alts[e>0?"firstChild":"lastChild"]),t._selection&&o.DomUtil.addClass(t._selection,"leaflet-control-geocoder-selected")};switch(e.keyCode){case 27:this.options.collapsed&&this._collapse();break;case 38:n(-1),o.DomEvent.preventDefault(e);break;case 40:n(1),o.DomEvent.preventDefault(e);break;case 13:if(this._selection){var i=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[i]),this._clearResults(),o.DomEvent.preventDefault(e)}}return!0}}),factory:function(e){return new o.Control.Geocoder(e)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./geocoders/nominatim":9}],2:[function(e,t,n){(function(n){var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("../util");t.exports={"class":o.Class.extend({options:{service_url:"http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"},initialize:function(e,t){o.setOptions(this,t),this._accessToken=e},geocode:function(e,t,n){var r={SingleLine:e,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"};this._key&&this._key.length&&(r.token=this._key),i.getJSON(this.options.service_url+"/findAddressCandidates",r,function(e){var i,r,s,a=[];if(e.candidates&&e.candidates.length)for(var l=0;l<=e.candidates.length-1;l++)i=e.candidates[l],r=o.latLng(i.location.y,i.location.x),s=o.latLngBounds(o.latLng(i.extent.ymax,i.extent.xmax),o.latLng(i.extent.ymin,i.extent.xmin)),a[l]={name:i.address,bbox:s,center:r};t.call(n,a)})},suggest:function(e,t,n){return this.geocode(e,t,n)},reverse:function(e,t,n,r){var s={location:encodeURIComponent(e.lng)+","+encodeURIComponent(e.lat),distance:100,f:"json"};i.getJSON(this.options.service_url+"/reverseGeocode",s,function(e){var t,i=[];e&&!e.error&&(t=o.latLng(e.location.y,e.location.x),i.push({name:e.address.Match_addr,center:t,bounds:o.latLngBounds(t,t)})),n.call(r,i)})}}),factory:function(e,t){return new o.Control.Geocoder.ArcGis(e,t)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],3:[function(e,t,n){(function(n){var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("../util");t.exports={"class":o.Class.extend({initialize:function(e){this.key=e},geocode:function(e,t,n){i.jsonp("//dev.virtualearth.net/REST/v1/Locations",{query:e,key:this.key},function(e){var i=[];if(e.resourceSets.length>0)for(var r=e.resourceSets[0].resources.length-1;r>=0;r--){var s=e.resourceSets[0].resources[r],a=s.bbox;i[r]={name:s.name,bbox:o.latLngBounds([a[0],a[1]],[a[2],a[3]]),center:o.latLng(s.point.coordinates)}}t.call(n,i)},this,"jsonp")},reverse:function(e,t,n,r){i.jsonp("//dev.virtualearth.net/REST/v1/Locations/"+e.lat+","+e.lng,{key:this.key},function(e){for(var t=[],i=e.resourceSets[0].resources.length-1;i>=0;i--){var s=e.resourceSets[0].resources[i],a=s.bbox;t[i]={name:s.name,bbox:o.latLngBounds([a[0],a[1]],[a[2],a[3]]),center:o.latLng(s.point.coordinates)}}n.call(r,t)},this,"jsonp")}}),factory:function(e){return new o.Control.Geocoder.Bing(e)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],4:[function(e,t,n){(function(n){var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("../util");t.exports={"class":o.Class.extend({options:{serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(e,t){this._key=e,o.setOptions(this,t),this.options.serviceUrl=this.options.service_url||this.options.serviceUrl;
},geocode:function(e,t,n){var r={address:e};this._key&&this._key.length&&(r.key=this._key),r=o.Util.extend(r,this.options.geocodingQueryParams),i.getJSON(this.options.serviceUrl,r,function(e){var i,r,s,a=[];if(e.results&&e.results.length)for(var l=0;l<=e.results.length-1;l++)i=e.results[l],r=o.latLng(i.geometry.location),s=o.latLngBounds(o.latLng(i.geometry.viewport.northeast),o.latLng(i.geometry.viewport.southwest)),a[l]={name:i.formatted_address,bbox:s,center:r,properties:i.address_components};t.call(n,a)})},reverse:function(e,t,n,r){var s={latlng:encodeURIComponent(e.lat)+","+encodeURIComponent(e.lng)};s=o.Util.extend(s,this.options.reverseQueryParams),this._key&&this._key.length&&(s.key=this._key),i.getJSON(this.options.serviceUrl,s,function(e){var t,i,s,a=[];if(e.results&&e.results.length)for(var l=0;l<=e.results.length-1;l++)t=e.results[l],i=o.latLng(t.geometry.location),s=o.latLngBounds(o.latLng(t.geometry.viewport.northeast),o.latLng(t.geometry.viewport.southwest)),a[l]={name:t.formatted_address,bbox:s,center:i,properties:t.address_components};n.call(r,a)})}}),factory:function(e,t){return new o.Control.Geocoder.Google(e,t)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],5:[function(e,t,n){(function(n){var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("../util");t.exports={"class":o.Class.extend({options:{geocodeUrl:"http://geocoder.api.here.com/6.2/geocode.json",reverseGeocodeUrl:"http://reverse.geocoder.api.here.com/6.2/reversegeocode.json",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(e){o.setOptions(this,e)},geocode:function(e,t,n){var i={searchtext:e,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1};i=o.Util.extend(i,this.options.geocodingQueryParams),this.getJSON(this.options.geocodeUrl,i,t,n)},reverse:function(e,t,n,i){var r={prox:encodeURIComponent(e.lat)+","+encodeURIComponent(e.lng),mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1};r=o.Util.extend(r,this.options.reverseQueryParams),this.getJSON(this.options.reverseGeocodeUrl,r,n,i)},getJSON:function(e,t,n,r){i.getJSON(e,t,function(e){var t,i,s,a=[];if(e.response.view&&e.response.view.length)for(var l=0;l<=e.response.view[0].result.length-1;l++)t=e.response.view[0].result[l].location,i=o.latLng(t.displayPosition.latitude,t.displayPosition.longitude),s=o.latLngBounds(o.latLng(t.mapView.topLeft.latitude,t.mapView.topLeft.longitude),o.latLng(t.mapView.bottomRight.latitude,t.mapView.bottomRight.longitude)),a[l]={name:t.address.label,bbox:s,center:i};n.call(r,a)})}}),factory:function(e){return new o.Control.Geocoder.HERE(e)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],6:[function(e,t,n){(function(n){var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("../util");t.exports={"class":o.Class.extend({options:{serviceUrl:"https://api.tiles.mapbox.com/v4/geocode/mapbox.places-v1/"},initialize:function(e,t){o.setOptions(this,t),this._accessToken=e},geocode:function(e,t,n){i.getJSON(this.options.serviceUrl+encodeURIComponent(e)+".json",{access_token:this._accessToken},function(e){var i,r,s,a=[];if(e.features&&e.features.length)for(var l=0;l<=e.features.length-1;l++)i=e.features[l],r=o.latLng(i.center.reverse()),s=i.hasOwnProperty("bbox")?o.latLngBounds(o.latLng(i.bbox.slice(0,2).reverse()),o.latLng(i.bbox.slice(2,4).reverse())):o.latLngBounds(r,r),a[l]={name:i.place_name,bbox:s,center:r};t.call(n,a)})},suggest:function(e,t,n){return this.geocode(e,t,n)},reverse:function(e,t,n,r){i.getJSON(this.options.serviceUrl+encodeURIComponent(e.lng)+","+encodeURIComponent(e.lat)+".json",{access_token:this._accessToken},function(e){var t,i,s,a=[];if(e.features&&e.features.length)for(var l=0;l<=e.features.length-1;l++)t=e.features[l],i=o.latLng(t.center.reverse()),s=t.hasOwnProperty("bbox")?o.latLngBounds(o.latLng(t.bbox.slice(0,2).reverse()),o.latLng(t.bbox.slice(2,4).reverse())):o.latLngBounds(i,i),a[l]={name:t.place_name,bbox:s,center:i};n.call(r,a)})}}),factory:function(e,t){return new o.Control.Geocoder.Mapbox(e,t)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],7:[function(e,t,n){(function(n){var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("../util");t.exports={"class":o.Class.extend({options:{serviceUrl:"//www.mapquestapi.com/geocoding/v1"},initialize:function(e,t){this._key=decodeURIComponent(e),o.Util.setOptions(this,t)},_formatName:function(){var e,t=[];for(e=0;e<arguments.length;e++)arguments[e]&&t.push(arguments[e]);return t.join(", ")},geocode:function(e,t,n){i.jsonp(this.options.serviceUrl+"/address",{key:this._key,location:e,limit:5,outFormat:"json"},function(e){var i,r,s=[];if(e.results&&e.results[0].locations)for(var a=e.results[0].locations.length-1;a>=0;a--)i=e.results[0].locations[a],r=o.latLng(i.latLng),s[a]={name:this._formatName(i.street,i.adminArea4,i.adminArea3,i.adminArea1),bbox:o.latLngBounds(r,r),center:r};t.call(n,s)},this)},reverse:function(e,t,n,r){i.jsonp(this.options.serviceUrl+"/reverse",{key:this._key,location:e.lat+","+e.lng,outputFormat:"json"},function(e){var t,i,s=[];if(e.results&&e.results[0].locations)for(var a=e.results[0].locations.length-1;a>=0;a--)t=e.results[0].locations[a],i=o.latLng(t.latLng),s[a]={name:this._formatName(t.street,t.adminArea4,t.adminArea3,t.adminArea1),bbox:o.latLngBounds(i,i),center:i};n.call(r,s)},this)}}),factory:function(e,t){return new o.Control.Geocoder.MapQuest(e,t)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],8:[function(e,t,n){(function(n){var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("../util");t.exports={"class":o.Class.extend({options:{serviceUrl:"//search.mapzen.com/v1",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(e,t){o.Util.setOptions(this,t),this._apiKey=e,this._lastSuggest=0},geocode:function(e,t,n){var r=this;i.getJSON(this.options.serviceUrl+"/search",o.extend({api_key:this._apiKey,text:e},this.options.geocodingQueryParams),function(e){t.call(n,r._parseResults(e,"bbox"))})},suggest:function(e,t,n){var r=this;i.getJSON(this.options.serviceUrl+"/autocomplete",o.extend({api_key:this._apiKey,text:e},this.options.geocodingQueryParams),o.bind(function(e){e.geocoding.timestamp>this._lastSuggest&&(this._lastSuggest=e.geocoding.timestamp,t.call(n,r._parseResults(e,"bbox")))},this))},reverse:function(e,t,n,r){var s=this;i.getJSON(this.options.serviceUrl+"/reverse",o.extend({api_key:this._apiKey,"point.lat":e.lat,"point.lon":e.lng},this.options.reverseQueryParams),function(e){n.call(r,s._parseResults(e,"bounds"))})},_parseResults:function(e,t){var n=[];return o.geoJson(e,{pointToLayer:function(e,t){return o.circleMarker(t)},onEachFeature:function(e,o){var i={};i.name=o.feature.properties.label,i[t]=o.getBounds(),i.center=i[t].getCenter(),i.properties=o.feature.properties,n.push(i)}}),n}}),factory:function(e,t){return new o.Control.Geocoder.Mapzen(e,t)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],9:[function(e,t,n){(function(n){var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("../util");t.exports={"class":o.Class.extend({options:{serviceUrl:"//nominatim.openstreetmap.org/",geocodingQueryParams:{},reverseQueryParams:{},htmlTemplate:function(e){var t=e.address,n=[];return(t.road||t.building)&&n.push("{building} {road} {house_number}"),(t.city||t.town||t.village||t.hamlet)&&n.push('<span class="'+(n.length>0?"leaflet-control-geocoder-address-detail":"")+'">{postcode} {city} {town} {village} {hamlet}</span>'),(t.state||t.country)&&n.push('<span class="'+(n.length>0?"leaflet-control-geocoder-address-context":"")+'">{state} {country}</span>'),i.template(n.join("<br/>"),t,!0)}},initialize:function(e){o.Util.setOptions(this,e)},geocode:function(e,t,n){i.jsonp(this.options.serviceUrl+"search",o.extend({q:e,limit:5,format:"json",addressdetails:1},this.options.geocodingQueryParams),function(e){for(var i=[],r=e.length-1;r>=0;r--){for(var s=e[r].boundingbox,a=0;a<4;a++)s[a]=parseFloat(s[a]);i[r]={icon:e[r].icon,name:e[r].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(e[r]):void 0,bbox:o.latLngBounds([s[0],s[2]],[s[1],s[3]]),center:o.latLng(e[r].lat,e[r].lon),properties:e[r]}}t.call(n,i)},this,"json_callback")},reverse:function(e,t,n,r){i.jsonp(this.options.serviceUrl+"reverse",o.extend({lat:e.lat,lon:e.lng,zoom:Math.round(Math.log(t/256)/Math.log(2)),addressdetails:1,format:"json"},this.options.reverseQueryParams),function(e){var t,i=[];e&&e.lat&&e.lon&&(t=o.latLng(e.lat,e.lon),i.push({name:e.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(e):void 0,center:t,bounds:o.latLngBounds(t,t),properties:e})),n.call(r,i)},this,"json_callback")}}),factory:function(e){return new o.Control.Geocoder.Nominatim(e)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],10:[function(e,t,n){(function(n){var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("../util");t.exports={"class":o.Class.extend({options:{serviceUrl:"//photon.komoot.de/api/",reverseUrl:"//photon.komoot.de/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]},initialize:function(e){o.setOptions(this,e)},geocode:function(e,t,n){var r=o.extend({q:e},this.options.geocodingQueryParams);i.getJSON(this.options.serviceUrl,r,o.bind(function(e){t.call(n,this._decodeFeatures(e))},this))},suggest:function(e,t,n){return this.geocode(e,t,n)},reverse:function(e,t,n,r){var s=o.extend({lat:e.lat,lon:e.lng},this.options.geocodingQueryParams);i.getJSON(this.options.reverseUrl,s,o.bind(function(e){n.call(r,this._decodeFeatures(e))},this))},_decodeFeatures:function(e){var t,n,i,r,s,a,l=[];if(e&&e.features)for(t=0;t<e.features.length;t++)n=e.features[t],i=n.geometry.coordinates,r=o.latLng(i[1],i[0]),s=n.properties.extent,a=s?o.latLngBounds([s[1],s[0]],[s[3],s[2]]):o.latLngBounds(r,r),l.push({name:this._deocodeFeatureName(n),center:r,bbox:a,properties:n.properties});return l},_deocodeFeatureName:function(e){var t,n;for(t=0;!n&&t<this.options.nameProperties.length;t++)n=e.properties[this.options.nameProperties[t]];return n}}),factory:function(e){return new o.Control.Geocoder.Photon(e)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],11:[function(e,t,n){(function(n){var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("../util");t.exports={"class":o.Class.extend({options:{serviceUrl:"http://api.what3words.com/"},initialize:function(e){this._accessToken=e},geocode:function(e,t,n){i.getJSON(this.options.serviceUrl+"w3w",{key:this._accessToken,string:e.split(/\s+/).join(".")},function(e){var i,r,s,a=[];e.position&&e.position.length&&(i=e.words,r=o.latLng(e.position[0],e.position[1]),s=o.latLngBounds(r,r),a[0]={name:i.join("."),bbox:s,center:r}),t.call(n,a)})},suggest:function(e,t,n){return this.geocode(e,t,n)},reverse:function(e,t,n,r){i.getJSON(this.options.serviceUrl+"position",{key:this._accessToken,position:[e.lat,e.lng].join(",")},function(e){var t,i,s,a=[];e.position&&e.position.length&&(t=e.words,i=o.latLng(e.position[0],e.position[1]),s=o.latLngBounds(i,i),a[0]={name:t.join("."),bbox:s,center:i}),n.call(r,a)})}}),factory:function(e){return new o.Control.Geocoder.What3Words(e)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":13}],12:[function(e,t,n){(function(n){var o="undefined"!=typeof window?window.L:"undefined"!=typeof n?n.L:null,i=e("./control"),r=e("./geocoders/nominatim"),s=e("./geocoders/bing"),a=e("./geocoders/mapquest"),l=e("./geocoders/mapbox"),d=e("./geocoders/what3words"),u=e("./geocoders/google"),c=e("./geocoders/photon"),h=e("./geocoders/mapzen"),p=e("./geocoders/arcgis"),f=e("./geocoders/here");t.exports=o.Util.extend(i["class"],{Nominatim:r["class"],nominatim:r.factory,Bing:s["class"],bing:s.factory,MapQuest:a["class"],mapQuest:a.factory,Mapbox:l["class"],mapbox:l.factory,What3Words:d["class"],what3words:d.factory,Google:u["class"],google:u.factory,Photon:c["class"],photon:c.factory,Mapzen:h["class"],mapzen:h.factory,ArcGis:p["class"],arcgis:p.factory,HERE:f["class"],here:f.factory}),o.Util.extend(o.Control,{Geocoder:t.exports,geocoder:i.factory})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./control":1,"./geocoders/arcgis":2,"./geocoders/bing":3,"./geocoders/google":4,"./geocoders/here":5,"./geocoders/mapbox":6,"./geocoders/mapquest":7,"./geocoders/mapzen":8,"./geocoders/nominatim":9,"./geocoders/photon":10,"./geocoders/what3words":11}],13:[function(e,t,n){(function(e){var n="undefined"!=typeof window?window.L:"undefined"!=typeof e?e.L:null,o=0,i=function(){function e(e){return o[e]}var t=/[&<>"'`]/g,n=/[&<>"'`]/,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return function(o){return null==o?"":o?(o=""+o,n.test(o)?o.replace(t,e):o):o+""}}();t.exports={jsonp:function(e,t,i,r,s){var a="_l_geocoder_"+o++;t[s||"callback"]=a,window[a]=n.Util.bind(i,r);var l=document.createElement("script");l.type="text/javascript",l.src=e+n.Util.getParamString(t),l.id=a,document.getElementsByTagName("head")[0].appendChild(l)},getJSON:function(e,t,o){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState)return 200!==i.status&&304!==i.status?void o(""):void o(JSON.parse(i.response))},i.open("GET",e+n.Util.getParamString(t),!0),i.setRequestHeader("Accept","application/json"),i.send(null)},template:function(e,t){return e.replace(/\{ *([\w_]+) *\}/g,function(e,n){var o=t[n];return void 0===o?o="":"function"==typeof o&&(o=o(t)),i(o)})},htmlEscape:i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[12]),function(e,t,n){"use strict";L.AwesomeMarkers={},L.AwesomeMarkers.version="2.0.1",L.AwesomeMarkers.Icon=L.Icon.extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"awesome-marker",prefix:"glyphicon",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white"},initialize:function(e){e=L.Util.setOptions(this,e)},createIcon:function(){var e=t.createElement("div"),n=this.options;return n.icon&&(e.innerHTML=this._createInner()),n.bgPos&&(e.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(e,"icon-"+n.markerColor),e},_createInner:function(){var e,t="",n="",o="",i=this.options;return e=i.icon.slice(0,i.prefix.length+1)===i.prefix+"-"?i.icon:i.prefix+"-"+i.icon,i.spin&&"string"==typeof i.spinClass&&(t=i.spinClass),i.iconColor&&("white"===i.iconColor||"black"===i.iconColor?n="icon-"+i.iconColor:o="style='color: "+i.iconColor+"' "),"<i "+o+"class='"+i.extraClasses+" "+i.prefix+" "+e+" "+t+" "+n+"'></i>"},_setIconStyles:function(e,t){var n,o=this.options,i=L.point(o["shadow"===t?"shadowSize":"iconSize"]);n="shadow"===t?L.point(o.shadowAnchor||o.iconAnchor):L.point(o.iconAnchor),!n&&i&&(n=i.divideBy(2,!0)),e.className="awesome-marker-"+t+" "+o.className,n&&(e.style.marginLeft=-n.x+"px",e.style.marginTop=-n.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},createShadow:function(){var e=t.createElement("div");return this._setIconStyles(e,"shadow"),e}}),L.AwesomeMarkers.icon=function(e){return new L.AwesomeMarkers.Icon(e)}}(this,document),L.Icon.Glyph=L.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],className:"",prefix:"",glyph:"home",glyphColor:"white",glyphSize:"11px",glyphAnchor:[0,-7]},createIcon:function(){var e=document.createElement("div"),t=this.options;return t.glyph&&e.appendChild(this._createGlyph()),this._setIconStyles(e,t.className),e},_createGlyph:function(){var e,t,n=this.options;n.prefix?e=n.glyph.slice(0,n.prefix.length+1)===n.prefix+"-"?n.glyph:n.prefix+"-"+n.glyph:(e="",t=n.glyph);var o=L.DomUtil.create("span",n.prefix+" "+e);return o.style.fontSize=n.glyphSize,o.style.color=n.glyphColor,o.style.width=n.iconSize[0]+"px",o.style.lineHeight=n.iconSize[1]+"px",o.style.textAlign="center",o.style.marginLeft=n.glyphAnchor[0]+"px",o.style.marginTop=n.glyphAnchor[1]+"px",o.style.pointerEvents="none",t&&(o.innerHTML=t,o.style.display="inline-block"),o},_setIconStyles:function(e,t){if("shadow"===t)return L.Icon.prototype._setIconStyles.call(this,e,t);var n=this.options,o=L.point(n.iconSize),i=L.point(n.iconAnchor);!i&&o&&(i=o.divideBy(2,!0)),e.className="leaflet-marker-icon leaflet-glyph-icon "+t;var r=this._getIconUrl("icon");r&&(e.style.backgroundImage="url('"+r+"')"),n.bgPos&&(e.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),n.bgSize&&(e.style.backgroundSize=n.bgSize.x+"px "+n.bgSize.y+"px"),i&&(e.style.marginLeft=-i.x+"px",e.style.marginTop=-i.y+"px"),o&&(e.style.width=o.x+"px",e.style.height=o.y+"px")}}),L.icon.glyph=function(e){return new L.Icon.Glyph(e)},L.Icon.Glyph.prototype.options.iconUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAUlSURBVFjDrZdLiBxVFIb/e289uqt6kkx6zIiIoKgLRReKuMhCcaOIAUEIiCCE4CIPggZ8kBjooPgM0TiYEUUjqBGchZqAQlyYRTA+kJiJQiJGMjN5zYzT3dP1rrr3HBeTjDGTSfc8Dvyruud89Z9z6kIJdBj31763MivsJXKuZYF6dak5++2mh7NOcsXVHq6sHbhOK/24kOJJMO4AE1vKygwZhxlKSHGKiD+RSu09vOXB43OCrHz96y6T2lsh+OmKXzFdlbLne2UopSAupBhjECcZgjDMgiiSxPhcK/nCr1sfOtcWcm/tq9uEsL4rl0vdK67pKVu2jUwTMk0wBBAzpBCQAnAtiZIlwWQwPlHPglZQAFj1Y23VwVkh92zbd59U+Kanp+p2L12mooKQ5AbcpuclS6LiKoRhxOfHzhXMcs3PtVV7Z0DufXH/LSzpSG9vr1/p6kIz0dDUrvx/IYXAsrJCkWc4e/Z0Zpgf+KX26A/TkNtrXziesY9Xq8tvWNZdVfVYg7hzwKVv3O3ZiKMWj46OTrq5fdOh1x5pSADwjdzo2nbv0u6qqkca2jCIMGcZAuqRhu8vEX7ZK2V2WgMAcXdtvyeKbPS662+osCohzMycHVweniNREoShoZO5KYobpciSh23bFq7rIUgNiLFghRkBlg2v7GlpiccsCHrcryzxUk3zmsNskeYGvt/lxVH4hMWEu9xSWaQFYQ7L1B6iGZ5bBoy+zWKiHiltFHpqeIsVhWaosg1iqlgg4wAAEYEXsV3EmNppJmExMFYUxfVSuIs6E0sI5FkBBhLJzH9laQxLSjBj0WQJgSJPweDTkknvS4JGbCuxKOt7UY4lEQfNnAu9TzLxN2nUdAQTLAEw8YIlAVgAkmDCSBL75eCutSeY+GTUqqNkqUVxUbIl4qgJo4vWzecrhyQAMJldYf1MXLLl1EIsYBZgoGwpRI2zMTPtGBhYbSQAlJF9lieRzNMIriVBzPOWawvoIkYaNC0u9IcAIAHgp75NLQl8ENbPZJ6jgAU48RyFqHEuZyE+Pda/vjENAQBD5s209Y+kPJlyM4+r3lUS0AWSyVEhpHnjYu1pyO+7N4ywwPvhxHDiuwo8j1b5rkQwMZIziYHBXetPzIAAgIV8exZOSMoieI6aU5vKtgR0jqw1JtiYbZfW/R/kSN+mcWbxdtwYjn1XTd9B7cQAfNdCWB/OhBR7jvWv/3tWCAAoO3ktjyZZJ0HHbsq2AooERVQXzPKly2vOgPz29jNNBr+e1IcSz5YAM4hmFzPDtyWS+lDK4N2DfU+dbgsBAFHyd+oszE3agt/GjWcrUBEjj5sQBb96pXpXhAzueDJi4u1p41TsuQpCiFln4bkKeXMoJeadg++tG+sYAgBBXOo3RRrruAnfkWDmGfIdCeQhiiQgQbxjtlqzQk59vCZlNluL5lDiORLyMjcA4DsKeXM4AfDKxa97ThAAqPaMfaR1Nq6jOiqOAhOm5TsKJg1QZGGRedY7V6tzVcjBWk1D0JZ8cigt2RJSimkXnqOgW8MxQLUTb6wN5g0BgGPV0c9BekTH41xx5YXrQ8FkTRgdpxU7ea9djbYQ1GokmJ43wUhWtgRcS04tQjAcw9CWw29tThYOAXD03XVfMps/TTTOy30blDZgiqxFK6p7OsnvCDJ1UD9LyUjORoPDkUQyPfdHbXW+qJCjfRsOwOAoNY4z6Xz01rHq3k5zO4ZMHTabYSIhJD87MLB64f8Ys8WdG/tfBljMJedfwY+s/2P4Pv8AAAAASUVORK5CYII=",function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=y({},t),e[I]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var o in n)!(o in t)&&(t[o]=n[o]);Q(t);for(var r in this)"_"===r.charAt(0)&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&G,i(e,"mousedown",this._onTapStart),i(e,"touchstart",this._onTapStart),this.nativeDraggable&&(i(e,"dragover",this),i(e,"dragenter",this)),F.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e){L&&L.state!==e&&(a(L,"display",e?"none":""),!e&&L.state&&x.insertBefore(L,_),L.state=e)}function n(e,t,n){if(e){n=n||B;do if(">*"===t&&e.parentNode===n||m(e,t))return e;while(e!==n&&(e=e.parentNode))}return null}function o(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function i(e,t,n){e.addEventListener(t,n,!1)}function r(e,t,n){e.removeEventListener(t,n,!1)}function s(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(P," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(P," ")}}function a(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return B.defaultView&&B.defaultView.getComputedStyle?n=B.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function l(e,t,n){if(e){var o=e.getElementsByTagName(t),i=0,r=o.length;if(n)for(;i<r;i++)n(o[i],i);return o}return[]}function d(e,t,n,o,i,r,s){var a=B.createEvent("Event"),l=(e||t[I]).options,d="on"+n.charAt(0).toUpperCase()+n.substr(1);a.initEvent(n,!0,!0),a.to=t,a.from=i||t,a.item=o||t,a.clone=L,a.oldIndex=r,a.newIndex=s,t.dispatchEvent(a),l[d]&&l[d].call(e,a)}function u(e,t,n,o,i,r){var s,a,l=e[I],d=l.options.onMove;return s=B.createEvent("Event"),s.initEvent("move",!0,!0),s.to=t,s.from=e,s.dragged=n,s.draggedRect=o,s.related=i||t,s.relatedRect=r||t.getBoundingClientRect(),e.dispatchEvent(s),d&&(a=d.call(l,s)),a}function c(e){e.draggable=!1}function h(){q=!1}function p(e,t){var n=e.lastElementChild,o=n.getBoundingClientRect();return(t.clientY-(o.top+o.height)>5||t.clientX-(o.right+o.width)>5)&&n}function f(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function g(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&m(e,t)&&n++;return n}function m(e,t){if(e){t=t.split(".");var n=t.shift().toUpperCase(),o=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==n&&e.nodeName.toUpperCase()!=n||t.length&&((" "+e.className+" ").match(o)||[]).length!=t.length)}return!1}function v(e,t){var n,o;return function(){void 0===n&&(n=arguments,o=this,setTimeout(function(){1===n.length?e.call(o,n[0]):e.apply(o,n),n=void 0},t))}}function y(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}if("undefined"==typeof window||"undefined"==typeof window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var _,w,b,L,x,R,S,C,D,k,A,T,E,U,W,N,M,O={},P=/\s+/g,I="Sortable"+(new Date).getTime(),z=window,B=z.document,j=z.parseInt,G=!!("draggable"in B.createElement("div")),H=function(e){return e=B.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),q=!1,V=Math.abs,F=([].slice,[]),J=v(function(e,t,n){if(n&&t.scroll){var o,i,r,s,a=t.scrollSensitivity,l=t.scrollSpeed,d=e.clientX,u=e.clientY,c=window.innerWidth,h=window.innerHeight;if(C!==n&&(S=t.scroll,C=n,S===!0)){S=n;do if(S.offsetWidth<S.scrollWidth||S.offsetHeight<S.scrollHeight)break;while(S=S.parentNode)}S&&(o=S,i=S.getBoundingClientRect(),r=(V(i.right-d)<=a)-(V(i.left-d)<=a),s=(V(i.bottom-u)<=a)-(V(i.top-u)<=a)),r||s||(r=(c-d<=a)-(d<=a),s=(h-u<=a)-(u<=a),(r||s)&&(o=z)),O.vx===r&&O.vy===s&&O.el===o||(O.el=o,O.vx=r,O.vy=s,clearInterval(O.pid),o&&(O.pid=setInterval(function(){o===z?z.scrollTo(z.pageXOffset+r*l,z.pageYOffset+s*l):(s&&(o.scrollTop+=s*l),r&&(o.scrollLeft+=r*l))},24)))}},30),Q=function(e){var t=e.group;t&&"object"==typeof t||(t=e.group={name:t}),["pull","put"].forEach(function(e){e in t||(t[e]=!0)}),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};return e.prototype={constructor:e,_onTapStart:function(e){var t=this,o=this.el,i=this.options,r=e.type,s=e.touches&&e.touches[0],a=(s||e).target,l=a,u=i.filter;if(!("mousedown"===r&&0!==e.button||i.disabled)&&(a=n(a,i.draggable,o))){if(T=g(a,i.draggable),"function"==typeof u){if(u.call(this,e,a,this))return d(t,l,"filter",a,o,T),void e.preventDefault()}else if(u&&(u=u.split(",").some(function(e){if(e=n(l,e.trim(),o))return d(t,e,"filter",a,o,T),!0})))return void e.preventDefault();i.handle&&!n(l,i.handle,o)||this._prepareDragStart(e,s,a)}},_prepareDragStart:function(e,t,n){var o,r=this,a=r.el,d=r.options,u=a.ownerDocument;n&&!_&&n.parentNode===a&&(W=e,x=a,_=n,w=_.parentNode,R=_.nextSibling,U=d.group,o=function(){r._disableDelayedDrag(),_.draggable=!0,s(_,r.options.chosenClass,!0),r._triggerDragStart(t)},d.ignore.split(",").forEach(function(e){l(_,e.trim(),c)}),i(u,"mouseup",r._onDrop),i(u,"touchend",r._onDrop),i(u,"touchcancel",r._onDrop),d.delay?(i(u,"mouseup",r._disableDelayedDrag),i(u,"touchend",r._disableDelayedDrag),i(u,"touchcancel",r._disableDelayedDrag),i(u,"mousemove",r._disableDelayedDrag),i(u,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(o,d.delay)):o())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(e,"mouseup",this._disableDelayedDrag),r(e,"touchend",this._disableDelayedDrag),r(e,"touchcancel",this._disableDelayedDrag),r(e,"mousemove",this._disableDelayedDrag),r(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(W={target:_,clientX:e.clientX,clientY:e.clientY},this._onDragStart(W,"touch")):this.nativeDraggable?(i(_,"dragend",this),i(x,"dragstart",this._onDragStart)):this._onDragStart(W,!0);try{B.selection?setTimeout(function(){B.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){x&&_&&(s(_,this.options.ghostClass,!0),e.active=this,d(this,x,"start",_,x,T))},_emulateDragOver:function(){if(N){if(this._lastX===N.clientX&&this._lastY===N.clientY)return;this._lastX=N.clientX,this._lastY=N.clientY,H||a(b,"display","none");var e=B.elementFromPoint(N.clientX,N.clientY),t=e,n=" "+this.options.group.name,o=F.length;if(t)do{if(t[I]&&t[I].options.groups.indexOf(n)>-1){for(;o--;)F[o]({clientX:N.clientX,clientY:N.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);H||a(b,"display","")}},_onTouchMove:function(t){if(W){e.active||this._dragStarted(),this._appendGhost();var n=t.touches?t.touches[0]:t,o=n.clientX-W.clientX,i=n.clientY-W.clientY,r=t.touches?"translate3d("+o+"px,"+i+"px,0)":"translate("+o+"px,"+i+"px)";M=!0,N=n,a(b,"webkitTransform",r),a(b,"mozTransform",r),a(b,"msTransform",r),a(b,"transform",r),t.preventDefault()}},_appendGhost:function(){if(!b){var e,t=_.getBoundingClientRect(),n=a(_),o=this.options;b=_.cloneNode(!0),s(b,o.ghostClass,!1),s(b,o.fallbackClass,!0),a(b,"top",t.top-j(n.marginTop,10)),a(b,"left",t.left-j(n.marginLeft,10)),a(b,"width",t.width),a(b,"height",t.height),a(b,"opacity","0.8"),a(b,"position","fixed"),a(b,"zIndex","100000"),a(b,"pointerEvents","none"),o.fallbackOnBody&&B.body.appendChild(b)||x.appendChild(b),e=b.getBoundingClientRect(),a(b,"width",2*t.width-e.width),a(b,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var n=e.dataTransfer,o=this.options;this._offUpEvents(),"clone"==U.pull&&(L=_.cloneNode(!0),a(L,"display","none"),x.insertBefore(L,_)),t?("touch"===t?(i(B,"touchmove",this._onTouchMove),i(B,"touchend",this._onDrop),i(B,"touchcancel",this._onDrop)):(i(B,"mousemove",this._onTouchMove),i(B,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",o.setData&&o.setData.call(this,n,_)),i(B,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(e){var o,i,r,s=this.el,l=this.options,d=l.group,c=d.put,f=U===d,g=l.sort;if(void 0!==e.preventDefault&&(e.preventDefault(),!l.dragoverBubble&&e.stopPropagation()),M=!0,U&&!l.disabled&&(f?g||(r=!x.contains(_)):U.pull&&c&&(U.name===d.name||c.indexOf&&~c.indexOf(U.name)))&&(void 0===e.rootEl||e.rootEl===this.el)){if(J(e,l,this.el),q)return;if(o=n(e.target,l.draggable,s),i=_.getBoundingClientRect(),r)return t(!0),void(L||R?x.insertBefore(_,L||R):g||x.appendChild(_));if(0===s.children.length||s.children[0]===b||s===e.target&&(o=p(s,e))){if(o){if(o.animated)return;v=o.getBoundingClientRect()}t(f),u(x,s,_,i,o,v)!==!1&&(_.contains(s)||(s.appendChild(_),w=s),this._animate(i,_),o&&this._animate(v,o))}else if(o&&!o.animated&&o!==_&&void 0!==o.parentNode[I]){D!==o&&(D=o,k=a(o),A=a(o.parentNode));var m,v=o.getBoundingClientRect(),y=v.right-v.left,S=v.bottom-v.top,C=/left|right|inline/.test(k.cssFloat+k.display)||"flex"==A.display&&0===A["flex-direction"].indexOf("row"),T=o.offsetWidth>_.offsetWidth,E=o.offsetHeight>_.offsetHeight,W=(C?(e.clientX-v.left)/y:(e.clientY-v.top)/S)>.5,N=o.nextElementSibling,O=u(x,s,_,i,o,v);if(O!==!1){if(q=!0,setTimeout(h,30),t(f),1===O||O===-1)m=1===O;else if(C){var P=_.offsetTop,z=o.offsetTop;m=P===z?o.previousElementSibling===_&&!T||W&&T:z>P}else m=N!==_&&!E||W&&E;_.contains(s)||(m&&!N?s.appendChild(_):o.parentNode.insertBefore(_,m?N:o)),w=_.parentNode,this._animate(i,_),this._animate(v,o)}}}},_animate:function(e,t){var n=this.options.animation;if(n){var o=t.getBoundingClientRect();a(t,"transition","none"),a(t,"transform","translate3d("+(e.left-o.left)+"px,"+(e.top-o.top)+"px,0)"),t.offsetWidth,a(t,"transition","all "+n+"ms"),a(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){a(t,"transition",""),a(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;r(B,"touchmove",this._onTouchMove),r(e,"mouseup",this._onDrop),r(e,"touchend",this._onDrop),r(e,"touchcancel",this._onDrop)},_onDrop:function(t){var n=this.el,o=this.options;clearInterval(this._loopId),clearInterval(O.pid),clearTimeout(this._dragStartTimer),r(B,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(B,"drop",this),r(n,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(M&&(t.preventDefault(),!o.dropBubble&&t.stopPropagation()),b&&b.parentNode.removeChild(b),_&&(this.nativeDraggable&&r(_,"dragend",this),c(_),s(_,this.options.ghostClass,!1),s(_,this.options.chosenClass,!1),x!==w?(E=g(_,o.draggable),E>=0&&(d(null,w,"sort",_,x,T,E),d(this,x,"sort",_,x,T,E),d(null,w,"add",_,x,T,E),d(this,x,"remove",_,x,T,E))):(L&&L.parentNode.removeChild(L),_.nextSibling!==R&&(E=g(_,o.draggable),E>=0&&(d(this,x,"update",_,x,T,E),d(this,x,"sort",_,x,T,E)))),e.active&&(null!=E&&E!==-1||(E=T),d(this,x,"end",_,x,T,E),this.save()))),this._nulling()},_nulling:function(){e.active===this&&(x=_=w=b=R=L=S=C=W=N=M=E=D=k=U=e.active=null)},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?_&&(this._onDragOver(e),o(e)):"drop"!==t&&"dragend"!==t||this._onDrop(e)},toArray:function(){for(var e,t=[],o=this.el.children,i=0,r=o.length,s=this.options;i<r;i++)e=o[i],n(e,s.draggable,this.el)&&t.push(e.getAttribute(s.dataIdAttr)||f(e));return t},sort:function(e){var t={},o=this.el;this.toArray().forEach(function(e,i){var r=o.children[i];n(r,this.options.draggable,o)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(o.removeChild(t[e]),o.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;return void 0===t?n[e]:(n[e]=t,void("group"===e&&Q(n)))},destroy:function(){var e=this.el;e[I]=null,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),
this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),F.splice(F.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},e.utils={on:i,off:r,css:a,find:l,is:function(e,t){return!!n(e,t,e)},extend:y,throttle:v,closest:n,toggleClass:s,index:g},e.create=function(t,n){return new e(t,n)},e.version="1.4.2",e});var control;$(function(){if($("#mapid").length>0){var e=new L.map("mapid").setView([45.516564,-73.575145],18),t="https://{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png",n=new L.TileLayer(t,{maxZoom:18});e.addLayer(n);var o}$("#geocodeBtn").click(function(t){$("form").addClass("loading");var n=new L.Control.Geocoder.nominatim({geocodingQueryParams:{countrycodes:"ca"}}),i="",r="",s="",a="";$(".field > .street.name").val()&&(r=$(".field > .street.name").val()+"&"),$(".field > .city").val()&&(s=$(".field > .city").val()+"&");var l=i+r+s+a;n.geocode(l,function(t){if(t.length>0){var n={address:t[0].name,lat:t[0].center.lat,"long":t[0].center.lng},i=distance(45.516564,-73.575145,t[0].center.lat,t[0].center.lng,"K");$(".field > .latitude").val(n.lat),$(".field > .longitude").val(n["long"]),$(".field .distance").val(i),"undefined"==typeof o?(o=L.marker([n.lat,n["long"]],{draggable:!0}),o.addTo(e),e.setView([n.lat,n["long"]],17)):(o.setLatLng([n.lat,n["long"]]),e.setView([n.lat,n["long"]],17)),o.on("dragend",function(e){var t=e.target.getLatLng();$(".field > .latitude").val(t.lat),$(".field > .longitude").val(t.lng);var n=distance(45.516564,-73.575145,t.lat,t.lng,"K");$(".field > .distance").val(n)})}else alert("Address not Found !!");$("form").removeClass("loading")})})});