!function(e){e.fn.formset=function(t){var a=e.extend({},e.fn.formset.defaults,t),n=a.extraClasses.join(" "),r=e("#id_"+a.prefix+"-TOTAL_FORMS"),o=e("#id_"+a.prefix+"-MAX_NUM_FORMS"),i=e("#id_"+a.prefix+"-MIN_NUM_FORMS"),s="input,select,textarea,label,div",l=e(this),d=function(e,t){a.extraClasses&&(e.removeClass(n),e.addClass(a.extraClasses[t%a.extraClasses.length]))},u=function(e,t,a){var n=new RegExp(t+"-(\\d+|__prefix__)-"),r=t+"-"+a+"-";e.attr("for")&&e.attr("for",e.attr("for").replace(n,r)),e.attr("id")&&e.attr("id",e.attr("id").replace(n,r)),e.attr("name")&&e.attr("name",e.attr("name").replace(n,r))},c=function(e){return e.find(s).length>0},f=function(){return 0==o.length||""==o.val()||o.val()-r.val()>0},p=function(){return 0==i.length||""==i.val()||r.val()-i.val()>0},h=function(t){var n=e.trim(a.deleteCssClass).replace(/\s+/g,"."),o=e.trim(a.addCssClass).replace(/\s+/g,".");t.is("TR")?t.children(":last").append('<a class="'+a.deleteCssClass+'" href="javascript:void(0)">'+a.deleteText+"</a>"):t.is("UL")||t.is("OL")?t.append('<li><a class="'+a.deleteCssClass+'" href="javascript:void(0)">'+a.deleteText+"</a></li>"):t.append('<a class="'+a.deleteCssClass+'" href="javascript:void(0)">'+a.deleteText+"</a>"),p()||t.find("a."+n).hide(),t.find("a."+n).click(function(){var t,i=e(this).parents("."+a.formCssClass),l=i.find('input:hidden[id $= "-DELETE"]'),c=i.siblings("a."+o+", ."+a.formCssClass+"-add");l.length?(l.val("on"),i.hide(),t=e("."+a.formCssClass).not(":hidden")):(i.remove(),t=e("."+a.formCssClass).not(".formset-custom-template"),r.val(t.length));for(var h=0,m=t.length;h<m;h++)d(t.eq(h),h),l.length||t.eq(h).find(s).each(function(){u(e(this),a.prefix,h)});return p()||e("a."+n).each(function(){e(this).hide()}),c.is(":hidden")&&f()&&c.show(),a.removed&&a.removed(i),!1})};if(l.each(function(t){var n=e(this),r=n.find('input:checkbox[id $= "-DELETE"]');r.length&&(r.is(":checked")?(r.before('<input type="hidden" name="'+r.attr("name")+'" id="'+r.attr("id")+'" value="on" />'),n.hide()):r.before('<input type="hidden" name="'+r.attr("name")+'" id="'+r.attr("id")+'" />'),e('label[for="'+r.attr("id")+'"]').hide(),r.remove()),c(n)&&(n.addClass(a.formCssClass),n.is(":visible")&&(h(n),d(n,t)))}),l.length){var m,g,v=!f();if(a.formTemplate?(g=a.formTemplate instanceof e?a.formTemplate:e(a.formTemplate),g.removeAttr("id").addClass(a.formCssClass+" formset-custom-template"),g.find(s).each(function(){u(e(this),a.prefix,"__prefix__")}),h(g)):(g=e("."+a.formCssClass+":last").clone(!0).removeAttr("id"),g.find('input:hidden[id $= "-DELETE"]').remove(),g.find(s).not(a.keepFieldValues).each(function(){var t=e(this);t.is("input:checkbox")||t.is("input:radio")?t.attr("checked",!1):t.val("")})),a.formTemplate=g,l.is("TR")){var y=l.eq(0).children().length,b=e('<tr><td colspan="'+y+'"><a class="'+a.addCssClass+'" href="javascript:void(0)">'+a.addText+"</a></tr>").addClass(a.formCssClass+"-add");l.parent().append(b),v&&b.hide(),m=b.find("a")}else l.filter(":last").after('<a class="'+a.addCssClass+'" href="javascript:void(0)">'+a.addText+"</a>"),m=l.filter(":last").next(),v&&m.hide();m.click(function(){var t=parseInt(r.val()),n=a.formTemplate.clone(!0).removeClass("formset-custom-template"),o=e(e(this).parents("tr."+a.formCssClass+"-add").get(0)||this);return delCssSelector=e.trim(a.deleteCssClass).replace(/\s+/g,"."),d(n,t),n.insertBefore(o).show(),n.find(s).each(function(){u(e(this),a.prefix,t)}),r.val(t+1),p()&&e("a."+delCssSelector).each(function(){e(this).show()}),f()||o.hide(),a.added&&a.added(n),!1})}return l},e.fn.formset.defaults={prefix:"form",formTemplate:null,addText:"add another",deleteText:"remove",addCssClass:"add-row",deleteCssClass:"delete-row",formCssClass:"dynamic-form",extraClasses:[],keepFieldValues:"",added:null,removed:null}}(jQuery),!function(e){e.tablesort=function(t,a){var n=this;this.$table=t,this.$thead=this.$table.find("thead"),this.settings=e.extend({},e.tablesort.defaults,a),this.$sortCells=this.$thead.length>0?this.$thead.find("th:not(.no-sort)"):this.$table.find("th:not(.no-sort)"),this.$sortCells.bind("click.tablesort",function(){n.sort(e(this))}),this.index=null,this.$th=null,this.direction=null},e.tablesort.prototype={sort:function(t,a){var n=new Date,r=this,o=this.$table,i=this.$thead.length>0?o.find("tbody tr"):o.find("tr").has("td"),s=o.find("tr td:nth-of-type("+(t.index()+1)+")"),l=t.data().sortBy,d=[],u=s.map(function(a,n){return l?"function"==typeof l?l(e(t),e(n),r):l:null!=e(this).data().sortValue?e(this).data().sortValue:e(this).text()});0!==u.length&&("asc"!==a&&"desc"!==a?this.direction="asc"===this.direction?"desc":"asc":this.direction=a,a="asc"==this.direction?1:-1,r.$table.trigger("tablesort:start",[r]),r.log("Sorting by "+this.index+" "+this.direction),r.$table.css("display"),setTimeout(function(){r.$sortCells.removeClass(r.settings.asc+" "+r.settings.desc);for(var l=0,c=u.length;c>l;l++)d.push({index:l,cell:s[l],row:i[l],value:u[l]});d.sort(function(e,t){return e.value>t.value?1*a:e.value<t.value?-1*a:0}),e.each(d,function(e,t){o.append(t.row)}),t.addClass(r.settings[r.direction]),r.log("Sort finished in "+((new Date).getTime()-n.getTime())+"ms"),r.$table.trigger("tablesort:complete",[r]),r.$table.css("display")},u.length>2e3?200:10))},log:function(t){(e.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+t)},destroy:function(){return this.$sortCells.unbind("click.tablesort"),this.$table.data("tablesort",null),null}},e.tablesort.DEBUG=!1,e.tablesort.defaults={debug:e.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending"},e.fn.tablesort=function(t){var a,n;return this.each(function(){a=e(this),n=a.data("tablesort"),n&&n.destroy(),a.data("tablesort",new e.tablesort(a,t))})}}(window.Zepto||window.jQuery),!function(e,t,a,n){e.fn.calendar=function(t){var r,o=e(this),i=o.selector||"",s=(new Date).getTime(),l=[],d=arguments[0],u="string"==typeof d,c=[].slice.call(arguments,1);return o.each(function(){var o,f,p=e.isPlainObject(t)?e.extend(!0,{},e.fn.calendar.settings,t):e.extend({},e.fn.calendar.settings),h=p.className,m=p.namespace,g=p.selector,v=p.formatter,y=p.parser,b=p.metadata,D=p.error,C="."+m,w="module-"+m,$=e(this),x=$.find(g.input),T=$.find(g.popup),k=$.find(g.activator),M=this,_=$.data(w),F=!1,E=!1;f={initialize:function(){f.debug("Initializing calendar for",M),o=f.get.isTouch(),f.setup.popup(),f.setup.inline(),f.setup.input(),f.setup.date(),f.create.calendar(),f.bind.events(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of calendar"),_=f,$.data(w,_)},destroy:function(){f.verbose("Destroying previous calendar for",M),$.removeData(w),f.unbind.events()},setup:{popup:function(){if(!p.inline&&(k.length||(k=$.children().first(),k.length))){if(e.fn.popup===n)return void f.error(D.popup);T.length||(T=e("<div/>").addClass(h.popup).prependTo(k.parent())),T.addClass(h.calendar);var t=p.onVisible,a=p.onHidden;x.length||(T.attr("tabindex","0"),t=function(){return f.focus(),p.onVisible.apply(T,arguments)},a=function(){return f.blur(),p.onHidden.apply(T,arguments)});var r=function(){return f.set.focusDate(f.get.date()),f.set.mode(p.startMode),p.onShow.apply(T,arguments)},o=p.on||(x.length?"focus":"click"),i=e.extend({},p.popupOptions,{popup:T,on:o,hoverable:"hover"===o,onShow:r,onVisible:t,onHide:p.onHide,onHidden:a});f.popup(i)}},inline:function(){(!k.length||p.inline)&&(T=e("<div/>").addClass(h.calendar).appendTo($),x.length||T.attr("tabindex","0"))},input:function(){p.touchReadonly&&x.length&&o&&x.prop("readonly",!0)},date:function(){if(x.length){var e=x.val(),t=y.date(e,p);f.set.date(t,p.formatInput,!1)}}},create:{calendar:function(){var t,a,n,r,o,i=f.get.mode(),s=new Date,l=f.get.date(),d=f.get.focusDate(),u=d||l||p.initialDate||s;u=f.helper.dateInRange(u),d||(d=u,f.set.focusDate(d,!1,!1));var c=u.getMinutes(),m=u.getHours(),g=u.getDate(),y=u.getMonth(),D=u.getFullYear(),C="year"===i,w="month"===i,$="day"===i,x="hour"===i,k="minute"===i,M="time"===p.type,_=$?7:x?4:3,F=7===_?"seven":4===_?"four":"three",E=$||x?6:4,N=(new Date(D,y,1).getDay()-p.firstDayOfWeek%7+7)%7;if(!p.constantHeight&&$){var I=new Date(D,y+1,0).getDate()+N;E=Math.ceil(I/7)}var H=C?10:w?1:0,O=$?1:0,S=x||k?1:0,R=x||k?g:1,Y=new Date(D-H,y-O,R-S,m),A=new Date(D+H,y+O,R+S,m),j=C?new Date(10*Math.ceil(D/10)-9,0,0):w?new Date(D,0,0):$?new Date(D,y,0):new Date(D,y,g,(-1)),V=C?new Date(10*Math.ceil(D/10)+1,0,1):w?new Date(D+1,0,1):$?new Date(D,y+1,1):new Date(D,y,g+1),P=e("<table/>").addClass(h.table).addClass(F+" column").addClass(i);if(!M){var L=e("<thead/>").appendTo(P);r=e("<tr/>").appendTo(L),o=e("<th/>").attr("colspan",""+_).appendTo(r);var q=e("<span/>").addClass(h.link).appendTo(o);q.text(v.header(u,i,p));var U=w?p.disableYear?"day":"year":$?p.disableMonth?"year":"month":"day";q.data(b.mode,U);var B=e("<span/>").addClass(h.prev).appendTo(o);B.data(b.focusDate,Y),B.toggleClass(h.disabledCell,!f.helper.isDateInRange(j,i)),e("<i/>").addClass(h.prevIcon).appendTo(B);var z=e("<span/>").addClass(h.next).appendTo(o);if(z.data(b.focusDate,A),z.toggleClass(h.disabledCell,!f.helper.isDateInRange(V,i)),e("<i/>").addClass(h.nextIcon).appendTo(z),$)for(r=e("<tr/>").appendTo(L),t=0;_>t;t++)o=e("<th/>").appendTo(r),o.text(v.dayColumnHeader((t+p.firstDayOfWeek)%7,p))}var J=e("<tbody/>").appendTo(P);for(t=C?10*Math.ceil(D/10)-9:$?1-N:0,a=0;E>a;a++)for(r=e("<tr/>").appendTo(J),n=0;_>n;n++,t++){var K=C?new Date(t,y,1,m,c):w?new Date(D,t,1,m,c):$?new Date(D,y,t,m,c):x?new Date(D,y,g,t):new Date(D,y,g,m,5*t),W=C?t:w?p.text.monthsShort[t]:$?K.getDate():v.time(K,p,!0);o=e("<td/>").addClass(h.cell).appendTo(r),o.text(W),o.data(b.date,K);var G=$&&K.getMonth()!==y||!f.helper.isDateInRange(K,i),Q=f.helper.dateEqual(K,l,i);o.toggleClass(h.disabledCell,G),o.toggleClass(h.activeCell,Q),x||k||o.toggleClass(h.todayCell,f.helper.dateEqual(K,s,i)),f.helper.dateEqual(K,d,i)&&f.set.focusDate(K,!1,!1)}if(p.today){var Z=e("<tr/>").appendTo(J),X=e("<td/>").attr("colspan",""+_).addClass(h.today).appendTo(Z);X.text(v.today(p)),X.data(b.date,s)}f.update.focus(!1,P),T.empty(),P.appendTo(T)}},update:{focus:function(t,a){a=a||T;var n=f.get.mode(),r=f.get.date(),i=f.get.focusDate(),s=f.get.startDate(),l=f.get.endDate(),d=(t?i:null)||r||(o?null:i);a.find("td").each(function(){var t=e(this),a=t.data(b.date);if(a){var r=t.hasClass(h.disabledCell),u=t.hasClass(h.activeCell),c=f.helper.dateEqual(a,i,n),p=!!d&&(!!s&&f.helper.isDateInRange(a,n,s,d)||!!l&&f.helper.isDateInRange(a,n,d,l));t.toggleClass(h.focusCell,c&&(!o||F)),t.toggleClass(h.rangeCell,p&&!u&&!r)}})}},refresh:function(){f.create.calendar()},bind:{events:function(){T.on("mousedown"+C,f.event.mousedown),T.on("touchstart"+C,f.event.mousedown),T.on("mouseup"+C,f.event.mouseup),T.on("touchend"+C,f.event.mouseup),T.on("mouseover"+C,f.event.mouseover),x.length?(x.on("input"+C,f.event.inputChange),x.on("focus"+C,f.event.inputFocus),x.on("blur"+C,f.event.inputBlur),x.on("click"+C,f.event.inputClick),x.on("keydown"+C,f.event.keydown)):T.on("keydown"+C,f.event.keydown)}},unbind:{events:function(){T.off(C),x.length&&x.off(C)}},event:{mouseover:function(t){var a=e(t.target),n=a.data(b.date),r=1===t.buttons;n&&f.set.focusDate(n,!1,!0,r)},mousedown:function(t){x.length&&t.preventDefault(),F=t.type.indexOf("touch")>=0;var a=e(t.target),n=a.data(b.date);n&&f.set.focusDate(n,!1,!0,!0)},mouseup:function(t){f.focus(),t.preventDefault(),t.stopPropagation(),F=!1;var a=e(t.target),n=a.parent();(n.data(b.date)||n.data(b.focusDate)||n.data(b.mode))&&(a=n);var r=a.data(b.date),o=a.data(b.focusDate),i=a.data(b.mode);if(r){var s=a.hasClass(h.today);f.selectDate(r,s)}else o?f.set.focusDate(o):i&&f.set.mode(i)},keydown:function(e){if((27===e.keyCode||9===e.keyCode)&&f.popup("hide"),f.popup("is visible"))if(37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode){var t=f.get.mode(),a="day"===t?7:"hour"===t?4:3,n=37===e.keyCode?-1:38===e.keyCode?-a:39==e.keyCode?1:a;n*="minute"===t?5:1;var r=f.get.focusDate()||f.get.date()||new Date,o=r.getFullYear()+("year"===t?n:0),i=r.getMonth()+("month"===t?n:0),s=r.getDate()+("day"===t?n:0),l=r.getHours()+("hour"===t?n:0),d=r.getMinutes()+("minute"===t?n:0),u=new Date(o,i,s,l,d);"time"===p.type&&(u=f.helper.mergeDateTime(r,u)),f.helper.isDateInRange(u,t)&&f.set.focusDate(u)}else if(13===e.keyCode){var c=f.get.focusDate();c&&f.selectDate(c)}(38===e.keyCode||40===e.keyCode)&&(e.preventDefault(),f.popup("show"))},inputChange:function(){var e=x.val(),t=y.date(e,p);f.set.date(t,!1)},inputFocus:function(){T.addClass(h.active)},inputBlur:function(){if(T.removeClass(h.active),p.formatInput){var e=f.get.date(),t=v.datetime(e,p);x.val(t)}},inputClick:function(){f.popup("show")}},get:{date:function(){return $.data(b.date)||null},focusDate:function(){return $.data(b.focusDate)||null},startDate:function(){var e=f.get.calendarModule(p.startCalendar);return(e?e.get.date():$.data(b.startDate))||null},endDate:function(){var e=f.get.calendarModule(p.endCalendar);return(e?e.get.date():$.data(b.endDate))||null},mode:function(){var t=$.data(b.mode)||p.startMode,a=f.get.validModes();return e.inArray(t,a)>=0?t:"time"===p.type?"hour":"month"===p.type?"month":"year"===p.type?"year":"day"},validModes:function(){var e=[];return"time"!==p.type&&(p.disableYear&&"year"!==p.type||e.push("year"),(!p.disableMonth&&"year"!==p.type||"month"===p.type)&&e.push("month"),p.type.indexOf("date")>=0&&e.push("day")),p.type.indexOf("time")>=0&&(e.push("hour"),p.disableMinute||e.push("minute")),e},isTouch:function(){try{return a.createEvent("TouchEvent"),!0}catch(e){return!1}},calendarModule:function(t){return t?(t instanceof e||(t=$.parent().children(t).first()),t.data(w)):null}},set:{date:function(e,t,a){t=t!==!1,a=a!==!1,e=f.helper.sanitiseDate(e),e=f.helper.dateInRange(e);var r=v.datetime(e,p);if(a&&p.onChange.call(M,e,r)===!1)return!1;var o=f.get.endDate();o&&e&&e>o&&f.set.endDate(n),f.set.dataKeyValue(b.date,e),f.set.focusDate(e),t&&x.length&&x.val(r)},startDate:function(e,t){e=f.helper.sanitiseDate(e);var a=f.get.calendarModule(p.startCalendar);a&&a.set.date(e),f.set.dataKeyValue(b.startDate,e,t)},endDate:function(e,t){e=f.helper.sanitiseDate(e);var a=f.get.calendarModule(p.endCalendar);a&&a.set.date(e),f.set.dataKeyValue(b.endDate,e,t)},focusDate:function(e,t,a,n){e=f.helper.sanitiseDate(e),e=f.helper.dateInRange(e);var r=f.set.dataKeyValue(b.focusDate,e,t);a=a!==!1&&r&&t===!1||E!=n,E=n,a&&f.update.focus(n)},mode:function(e,t){f.set.dataKeyValue(b.mode,e,t)},dataKeyValue:function(e,t,a){var n=$.data(e),r=n===t||t>=n&&n>=t;return t?$.data(e,t):$.removeData(e),a=a!==!1&&!r,a&&f.create.calendar(),!r}},selectDate:function(e,t){var a=f.get.mode(),n=t||"minute"===a||p.disableMinute&&"hour"===a||"date"===p.type&&"day"===a||"month"===p.type&&"month"===a||"year"===p.type&&"year"===a;if(n){var r=f.set.date(e)===!1;if(!r&&p.closable){f.popup("hide");var o=f.get.calendarModule(p.endCalendar);o&&(o.popup("show"),o.focus())}}else{var i="year"===a?p.disableMonth?"day":"month":"month"===a?"day":"day"===a?"hour":"minute";f.set.mode(i),"hour"===a||"day"===a&&f.get.date()?f.set.date(e):f.set.focusDate(e)}},changeDate:function(e){f.set.date(e)},clear:function(){f.set.date(n)},popup:function(){return k.popup.apply(k,arguments)},focus:function(){x.length?x.focus():T.focus()},blur:function(){x.length?x.blur():T.blur()},helper:{sanitiseDate:function(e){return e?(e instanceof Date||(e=y.date(""+e)),isNaN(e.getTime())?n:e):n},dateDiff:function(e,t,a){a=a||"day";var n="time"===p.type,r="year"===a,o=r||"month"===a,i="minute"===a,s=i||"hour"===a;return e=new Date(n?2e3:e.getFullYear(),n?0:r?0:e.getMonth(),n?1:o?1:e.getDate(),s?e.getHours():0,i?Math.floor(e.getMinutes()/5):0),t=new Date(n?2e3:t.getFullYear(),n?0:r?0:t.getMonth(),n?1:o?1:t.getDate(),s?t.getHours():0,i?Math.floor(t.getMinutes()/5):0),t.getTime()-e.getTime()},dateEqual:function(e,t,a){return!!e&&!!t&&0===f.helper.dateDiff(e,t,a)},isDateInRange:function(e,t,a,n){if(!a&&!n){var r=f.get.startDate();a=r&&p.minDate?Math.max(r,p.minDate):r||p.minDate,n=p.maxDate}return!(!e||a&&f.helper.dateDiff(e,a,t)>0||n&&f.helper.dateDiff(n,e,t)>0)},dateInRange:function(e,t,a){if(!t&&!a){var n=f.get.startDate();t=n&&p.minDate?Math.max(n,p.minDate):n||p.minDate,a=p.maxDate}var r="time"===p.type;return e?t&&f.helper.dateDiff(e,t,"minute")>0?r?f.helper.mergeDateTime(e,t):t:a&&f.helper.dateDiff(a,e,"minute")>0?r?f.helper.mergeDateTime(e,a):a:e:e},mergeDateTime:function(e,t){return e&&t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes()):t}},setting:function(t,a){if(f.debug("Changing setting",t,a),e.isPlainObject(t))e.extend(!0,p,t);else{if(a===n)return p[t];p[t]=a}},internal:function(t,a){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(a===n)return f[t];f[t]=a}},debug:function(){p.debug&&(p.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,p.name+":"),f.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),f.verbose.apply(console,arguments)))},error:function(){f.error=Function.prototype.bind.call(console.error,console,p.name+":"),f.error.apply(console,arguments)},performance:{log:function(e){var t,a,n;p.performance&&(t=(new Date).getTime(),n=s||t,a=t-n,s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:M,"Execution Time":a})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var t=p.name+":",a=0;s=!1,clearTimeout(f.performance.timer),e.each(l,function(e,t){a+=t["Execution Time"]}),t+=" "+a+"ms",i&&(t+=" '"+i+"'"),(console.group!==n||console.table!==n)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,a,o){var i,s,l,d=_;return a=a||c,o=M||o,"string"==typeof t&&d!==n&&(t=t.split(/[\. ]/),i=t.length-1,e.each(t,function(a,r){var o=a!=i?r+t[a+1].charAt(0).toUpperCase()+t[a+1].slice(1):t;if(e.isPlainObject(d[o])&&a!=i)d=d[o];else{if(d[o]!==n)return s=d[o],!1;if(!e.isPlainObject(d[r])||a==i)return d[r]!==n?(s=d[r],!1):(f.error(D.method,t),!1);d=d[r]}})),e.isFunction(s)?l=s.apply(o,a):s!==n&&(l=s),e.isArray(r)?r.push(l):r!==n?r=[r,l]:l!==n&&(r=l),s}},u?(_===n&&f.initialize(),f.invoke(d)):(_!==n&&_.invoke("destroy"),f.initialize())}),r!==n?r:o},e.fn.calendar.settings={name:"Calendar",namespace:"calendar",debug:!1,verbose:!1,performance:!1,type:"datetime",firstDayOfWeek:0,constantHeight:!0,today:!1,closable:!0,monthFirst:!0,touchReadonly:!0,inline:!1,on:null,initialDate:null,startMode:!1,minDate:null,maxDate:null,ampm:!0,disableYear:!1,disableMonth:!1,disableMinute:!1,formatInput:!0,startCalendar:null,endCalendar:null,popupOptions:{position:"bottom left",lastResort:"bottom left",prefer:"opposite",hideOnScroll:!1},text:{days:["S","M","T","W","T","F","S"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",now:"Now",am:"AM",pm:"PM"},formatter:{header:function(e,t,a){return"year"===t?a.formatter.yearHeader(e,a):"month"===t?a.formatter.monthHeader(e,a):"day"===t?a.formatter.dayHeader(e,a):"hour"===t?a.formatter.hourHeader(e,a):a.formatter.minuteHeader(e,a)},yearHeader:function(e,t){var a=10*Math.ceil(e.getFullYear()/10);return a-9+" - "+(a+2)},monthHeader:function(e,t){return e.getFullYear()},dayHeader:function(e,t){var a=t.text.months[e.getMonth()],n=e.getFullYear();return a+" "+n},hourHeader:function(e,t){return t.formatter.date(e,t)},minuteHeader:function(e,t){return t.formatter.date(e,t)},dayColumnHeader:function(e,t){return t.text.days[e]},datetime:function(e,t){if(!e)return"";var a="time"===t.type?"":t.formatter.date(e,t),n=t.type.indexOf("time")<0?"":t.formatter.time(e,t,!1),r="datetime"===t.type?" ":"";return a+r+n},date:function(e,t){if(!e)return"";var a=e.getDate(),n=t.text.months[e.getMonth()],r=e.getFullYear();return"year"===t.type?r:"month"===t.type?n+" "+r:(t.monthFirst?n+" "+a:a+" "+n)+", "+r},time:function(e,t,a){if(!e)return"";var n=e.getHours(),r=e.getMinutes(),o="";return t.ampm&&(o=" "+(12>n?t.text.am:t.text.pm),n=0===n?12:n>12?n-12:n),n+":"+(10>r?"0":"")+r+o},today:function(e){return"date"===e.type?e.text.today:e.text.now}},parser:{date:function(t,a){if(!t)return null;if(t=(""+t).trim().toLowerCase(),0===t.length)return null;var r,o,i,s=-1,l=-1,d=-1,u=-1,c=-1,f=n,p="time"===a.type,h=a.type.indexOf("time")<0,m=t.split(a.regExp.dateWords),g=t.split(a.regExp.dateNumbers);if(!h)for(f=e.inArray(a.text.am.toLowerCase(),m)>=0||!(e.inArray(a.text.pm.toLowerCase(),m)>=0)&&n,r=0;r<g.length;r++){var v=g[r];if(v.indexOf(":")>=0){if(0>l||0>s){var y=v.split(":");for(i=0;i<Math.min(2,y.length);i++)o=parseInt(y[i]),isNaN(o)&&(o=0),0===i?l=o%24:s=o%60}g.splice(r,1)}}if(!p){for(r=0;r<m.length;r++){var b=m[r];if(!(b.length<=0)){for(b=b.substring(0,Math.min(b.length,3)),o=0;o<a.text.months.length;o++){var D=a.text.months[o];if(D=D.substring(0,Math.min(b.length,Math.min(D.length,3))).toLowerCase(),D===b){u=o+1;break}}if(u>=0)break}}for(r=0;r<g.length;r++)if(o=parseInt(g[r]),!isNaN(o)&&o>59){c=o,g.splice(r,1);break}if(0>u)for(r=0;r<g.length;r++)if(i=r>1||a.monthFirst?r:1===r?0:1,o=parseInt(g[i]),!isNaN(o)&&o>=1&&12>=o){u=o,g.splice(i,1);break}for(r=0;r<g.length;r++)if(o=parseInt(g[r]),!isNaN(o)&&o>=1&&31>=o){d=o,g.splice(r,1);break}if(0>c)for(r=g.length-1;r>=0;r--)if(o=parseInt(g[r]),!isNaN(o)){99>o&&(o+=2e3),c=o,g.splice(r,1);break}}if(!h){if(0>l)for(r=0;r<g.length;r++)if(o=parseInt(g[r]),!isNaN(o)&&o>=0&&23>=o){l=o,g.splice(r,1);break}if(0>s)for(r=0;r<g.length;r++)if(o=parseInt(g[r]),!isNaN(o)&&o>=0&&59>=o){s=o,g.splice(r,1);break}}if(0>s&&0>l&&0>d&&0>u&&0>c)return null;0>s&&(s=0),0>l&&(l=0),0>d&&(d=1),0>u&&(u=1),0>c&&(c=(new Date).getFullYear()),f!==n&&(f?12===l&&(l=0):12>l&&(l+=12));var C=new Date(c,u-1,d,l,s);return(C.getMonth()!==u-1||C.getFullYear()!==c)&&(C=new Date(c,u,0,l,s)),isNaN(C.getTime())?null:C}},onChange:function(e,t){return!0},onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},selector:{popup:".ui.popup",input:"input",activator:"input"},regExp:{dateWords:/[^A-Za-z\u00C0-\u024F]+/g,dateNumbers:/[^\d:]+/g},error:{popup:"UI Popup, a required component is not included in this page",method:"The method you called is not defined."},className:{calendar:"calendar",active:"active",popup:"ui popup",table:"ui celled center aligned unstackable table",prev:"prev link",next:"next link",prevIcon:"chevron left icon",nextIcon:"chevron right icon",link:"link",cell:"link",disabledCell:"disabled",activeCell:"active",rangeCell:"range",focusCell:"focus",todayCell:"today",today:"today link"},metadata:{date:"date",focusDate:"focusDate",startDate:"startDate",endDate:"endDate",mode:"mode"}}}(jQuery,window,document),$(function(){$(".ui.open-menu").on("click",function(){$(".ui.sidebar").sidebar("toggle")}),$(".help-text").popup(),$(".message .close").on("click",function(){$(this).closest(".message").transition("fade")}),$(".ui.accordion").accordion(),$(".ui.dropdown").dropdown(),$("table").tablesort(),$(".ui.dropdown").dropdown({transition:"drop"}),$(".ui.calendar").calendar({type:"date",formatter:{date:function(e,t){if(!e)return"";var a=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();return n<10&&(n="0"+n),a<10&&(a="0"+a),r+"-"+n+"-"+a}}})}),$(function(){$(".ui.dropdown.maindish.selection").dropdown("setting","onChange",function(e,t,a){$url=$(".field.dish.selection").data("url"),window.location.replace($url+e)})}),$(function(){function e(e,t,a){selector=".ui.accordion.meals."+e,$(selector).show()}function t(){var t=$("#id_dietary_restriction-delivery_schedule").val();t&&t.forEach(e)}function a(){$(".ui.accordion.meals").each(function(){$(this).hide()})}$(".ui.dropdown.member.status > .menu > .item").click(function(){var e=$(this).data("value"),t=new Date,a=$(".ui.dropdown.status").attr("data-url");$.get(a,{status:e},function(e,a){$(".ui.modal.status").html(e).modal("setting",{closable:!1,onVisible:function(){$(".ui.status_to.dropdown").dropdown(),$("#rangestart").calendar({type:"date",on:"click",minDate:new Date(t.getFullYear(),t.getMonth(),t.getDate()),formatter:{date:function(e,t){if(!e)return"";var a=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();return n<10&&(n="0"+n),a<10&&(a="0"+a),r+"-"+n+"-"+a}},endCalendar:$("#rangeend")}),$("#rangeend").calendar({type:"date",formatter:{date:function(e,t){if(!e)return"";var a=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();return n<10&&(n="0"+n),a<10&&(a="0"+a),r+"-"+n+"-"+a}},startCalendar:$("#rangestart")})},onApprove:function(e,t){$.ajax({type:"POST",url:$(".ui.dropdown.status").attr("data-url"),data:$("#change-status-form").serialize(),success:function(e,t,a){$(e).find(".errorlist").length>0?($(".ui.modal.status").html(e),console.log("show modal.."),$(".ui.modal.status").modal("show")):location.reload()}})},onDeny:function(e){$(".ui.dropdown.status").dropdown("restore defaults")}}).modal("show")})}),$("#dietary_restriction-delivery_type .dropdown").dropdown({onChange:function(e,t,a){"E"==a.data("value")?$("#form-delivery-schedule").hide():$("#form-delivery-schedule").show()}});var n=$("#id_payment_information-same_as_client");n&&n.checked&&$("#billing_select_member").hide(),$("#id_payment_information-same_as_client").on("change",function(){this.checked?$("#billing_select_member").hide():$("#billing_select_member").show()}),$(".ui.button.add.member").on("click",function(){$(".existing--member").val("").attr("disabled","disabled"),$(this).transition("scale"),$(".ui.add.form.member").transition("scale")}),$(".ui.button.cancel.add.member").on("click",function(){$(".ui.button.add.member").transition("scale"),$(".existing--member").removeAttr("disabled")}),(""!==$(".firstname").val()||""!==$(".lastname").val()&&""===$(".existing--member").val())&&($(".ui.button.add.member").transition("scale"),$(".existing--member").attr("disabled","disabled"),$(".ui.add.form.member").transition("scale")),$search_url=$(".ui.search").attr("data-url"),$(".ui.search").search({apiSettings:{cache:"local",url:$search_url+"?name={query}"},minCharacters:3}),$("#id_dietary_restriction-delivery_schedule").change(function(){a(),t()}),a(),t()}),$(function(){$(".order-delete").click(function(){var e=$(this).attr("data-order-id"),t=".ui.basic.modal.order-"+e;$(t).modal("show")}),$(".ui.dropdown.order.status .menu > .item").click(function(){$(".ui.dropdown.order.status").addClass("loading"),$.ajax({url:$(".ui.dropdown.order.status").attr("data-url"),type:"POST",data:{status:$(this).data("value"),csrfmiddlewaretoken:$(".ui.dropdown.order.status").attr("data-csrf-token")},success:function(e){$(".ui.dropdown.order.status").removeClass("loading")}})})}),$(function(){$(".billing-delete").click(function(){var e=$(this).attr("data-billing-id"),t=".ui.basic.modal.billing-"+e;$(t).modal("show")}),$("#billing_delivery_date").calendar({type:"month",formatter:{date:function(e,t){if(!e)return"";var a=e.getMonth()+1,n=e.getFullYear();return a<10&&(a="0"+a),n+"-"+a}}}),$(".add.icon").popup()}),$(function(){$(".ui.large.form").form({on:"submit",revalidate:"false",fields:{username:{identifier:"username",rules:[{type:"empty",prompt:"Please enter a username"}]},password:{identifier:"password",rules:[{type:"empty",prompt:"Please enter a password"},{type:"minLength[6]",prompt:"Your password must be at least {ruleValue} characters"}]}}})});